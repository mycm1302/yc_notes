# 라그랑지역학

> 상위: [[고전역학]]

조제프루이 라그랑주가 1788년 《해석 역학》에서 발표한 이론으로, 라그랑지안이라는 물리량을 통해 물체의 운동을 설명하는 역학 체계입니다. 로봇 동역학의 핵심 이론적 기반을 제공합니다.

## ⚡ 기본 개념

### 정의
라그랑주 역학(Lagrangian mechanics)은 수학자 조제프루이 라그랑주(J. L. Lagrange, 1736~1813)가 기존의 고전역학을 새롭게 수학적 형식화하여 발표한 이론입니다.

**핵심 원리:**
- 최소 작용의 원리 (Principle of Least Action)
- 에너지 기반 접근법 (스칼라량 중심)
- 일반화 좌표계 사용

### 라그랑지안 (Lagrangian)
```
L = T - V

여기서:
- L: 라그랑지안
- T: 운동에너지 (Kinetic Energy)
- V: 위치에너지 (Potential Energy)
```

라그랑지안은 계의 운동에너지와 위치에너지의 차로 정의되며, 일반화된 좌표 q와 그 시간미분 q̇의 함수로 표현됩니다: **L = L(q, q̇, t)**

## 🎯 오일러-라그랑지 방정식

### 기본 형태
```
d/dt(∂L/∂q̇ᵢ) - ∂L/∂qᵢ = Qᵢ

여기서:
- qᵢ: i번째 일반화 좌표
- q̇ᵢ: i번째 일반화 속도
- Qᵢ: i번째 일반화된 힘
```

### 보존계에서의 형태
외력이 없는 보존계에서는:
```
d/dt(∂L/∂q̇ᵢ) - ∂L/∂qᵢ = 0
```

이것이 **오일러-라그랑지 방정식**의 표준 형태입니다.

### 해밀턴의 원리
작용 (Action)을 다음과 같이 정의:
```
S = ∫ₜ₁ᵗ² L dt

최소작용의 원리: δS = 0
```

작용을 극소로 만드는 경로가 실제 물체의 운동 경로가 됩니다.

## 🔄 뉴턴 역학과의 비교

### 근본적 차이점

| 측면 | 뉴턴 역학 | 라그랑지 역학 |
|------|-----------|---------------|
| **기본 개념** | 힘과 가속도 | 에너지와 작용 |
| **수학적 형태** | 벡터 방정식 | 스칼라 함수 |
| **철학적 관점** | 인과론적 | 목적론적 |
| **좌표계** | 직교좌표 중심 | 일반화 좌표 |
| **복잡한 시스템** | 어려움 | 체계적 해결 |

### 장점
1. **계산의 편리함**: 복잡한 다물체 시스템에서 체계적 접근
2. **좌표 독립성**: 일반화 좌표로 문제에 적합한 좌표계 선택
3. **에너지 중심**: 스칼라량으로 계산이 단순
4. **구속조건 처리**: 자연스럽게 구속조건 반영

## 🤖 로봇공학에서의 응용

### 로봇 동역학 유도
**n관절 로봇의 라그랑지안:**
```
L = T(q, q̇) - V(q)

여기서:
- q = [q₁, q₂, ..., qₙ]ᵀ: 관절각도 벡터
- q̇: 관절속도 벡터
```

**로봇 동역학 방정식:**
```
d/dt(∂L/∂q̇ᵢ) - ∂L/∂qᵢ = τᵢ

최종 형태: M(q)q̈ + C(q,q̇)q̇ + G(q) = τ
```

### 구체적 유도 과정

#### 1단계: 운동에너지 계산
```
T = ½ Σᵢ [mᵢvᵢᵀvᵢ + ωᵢᵀIᵢωᵢ]

여기서:
- mᵢ: i번째 링크의 질량
- vᵢ: i번째 링크 질량중심의 속도
- ωᵢ: i번째 링크의 각속도
- Iᵢ: i번째 링크의 관성 텐서
```

#### 2단계: 위치에너지 계산
```
V = Σᵢ mᵢgᵀrᵢ

여기서:
- g: 중력 벡터
- rᵢ: i번째 링크 질량중심의 위치
```

#### 3단계: 라그랑지안 구성
```
L = T - V
```

#### 4단계: 오일러-라그랑지 방정식 적용
각 관절에 대해 미분 연산을 수행하여 동역학 방정식을 얻습니다.

### 실제 로봇 시스템 예제

#### 2링크 로봇 팔
```
T = ½m₁l₁²q̇₁² + ½m₂[l₁²q̇₁² + l₂²(q̇₁+q̇₂)² + 2l₁l₂q̇₁(q̇₁+q̇₂)cos(q₂)]

V = m₁gl₁sin(q₁) + m₂g[l₁sin(q₁) + l₂sin(q₁+q₂)]

L = T - V
```

#### 밸런싱 로봇
```
상태변수: x (이동거리), θ (기울기)

T = ½M ẋ² + ½m[(ẋ + lθ̇cos(θ))² + (lθ̇sin(θ))²] + ½Jθ̇²

V = mgl(1 - cos(θ))

L = T - V
```

## 🔧 일반화 좌표

### 개념
일반화 좌표(generalized coordinates)는 시스템의 구성(configuration)을 나타내는 독립 변수들입니다.

**예시:**
- 관절 로봇: 각 관절의 각도
- 이동 로봇: 위치 (x, y)와 방향각 θ
- 드론: 위치 (x, y, z)와 자세 (φ, θ, ψ)

### 자유도와의 관계
```
자유도 = 일반화 좌표의 수
n자유도 시스템 → n개의 일반화 좌표
```

### 구속조건 처리
구속조건이 있는 경우 **라그랑주 승수법** 사용:
```
L' = L + Σⱼ λⱼφⱼ(q, t)

여기서:
- λⱼ: 라그랑주 승수
- φⱼ: j번째 구속조건
```

## ⚖️ 보존 법칙

### 에너지 보존
시간에 명시적으로 의존하지 않는 라그랑지안의 경우:
```
H = Σᵢ q̇ᵢ(∂L/∂q̇ᵢ) - L = constant

H는 해밀토니안 (총 에너지)
```

### 일반화 운동량 보존
```
pᵢ = ∂L/∂q̇ᵢ

만약 ∂L/∂qᵢ = 0이면 pᵢ = constant (순환 좌표)
```

**응용 예:**
- 선운동량 보존 (병진 대칭)
- 각운동량 보존 (회전 대칭)

## 🎪 복잡한 시스템에서의 위력

### 이중 진자
뉴턴 역학으로는 거의 불가능하지만, 라그랑지 역학으로는 체계적 해결:
```
L = ½m₁l₁²θ̇₁² + ½m₂[l₁²θ̇₁² + l₂²θ̇₂² + 2l₁l₂θ̇₁θ̇₂cos(θ₁-θ₂)]
    - m₁gl₁cos(θ₁) - m₂g[l₁cos(θ₁) + l₂cos(θ₂)]
```

### 다관절 로봇
각 관절의 운동을 독립적으로 고려할 필요 없이 전체 시스템의 에너지만으로 동역학 방정식 유도 가능.

## 🌊 현대 물리학으로의 확장

### 양자역학과의 연결
- **경로적분**: 양자역학을 라그랑지안으로 기술
- **해밀토니안**: 양자역학의 기본 연산자
- **작용 원리**: 양자역학의 페인만 경로적분의 기초

### 장론으로의 확장
```
라그랑지안 밀도: ℒ(φ, ∂φ/∂xᵤ)
작용: S = ∫ ℒ d⁴x
```

### 상대론적 확장
라그랑주 역학은 자연스럽게 상대론적 이론으로 확장 가능.

## 💻 로봇 제어에서의 활용

### 모델 기반 제어
- **컴퓨트드 토크 제어**: 라그랑지안 기반 동역학 보상
- **모델 예측 제어**: 동역학 모델 기반 최적화

### 에너지 기반 제어
```
에너지 함수: E = T + V
패시브 제어: 에너지 보존 특성 활용
```

### 최적 제어
변분법과 라그랑지안을 결합한 최적 궤적 계획.

---

## 🔗 연결 분야
- 상위: [[고전역학]]
- 병렬: [[뉴턴법칙]], [[해밀턴역학]]
- 응용: [[동역학]] (로봇 동역학 방정식)
- 응용: [[제어시스템]] (모델 기반 제어)
- 응용: [[궤적계획]] (최적 제어)
- 관련: [[변분법]], [[미분방정식]]

---

## 📖 참고 문헌
- [라그랑주 역학 - 위키백과](https://ko.wikipedia.org/wiki/라그랑주_역학)
- [라그랑주 역학 - 나무위키](https://namu.wiki/w/라그랑주%20역학)
- [라그랑주 방정식 - 로봇은 숙녀의 소양이기에](https://wikidocs.net/283739)
- [밸런싱 로봇의 라그랑지안 유도](https://pinkwink.kr/309)
- [이중 진자와 라그랑지안](https://www.ksakosmos.com/post/%EC%9D%B4%EC%A4%91-%EC%A7%84%EC%9E%90%EC%99%80-%EB%9D%BC%EA%B7%B8%EB%9E%91%EC%A7%80%EC%95%88)