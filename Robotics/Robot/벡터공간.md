# 벡터공간

> 상위: [[선형대수및기하학]]

로봇공학에서 관절공간, 작업공간 등의 수학적 구조를 이해하기 위한 벡터공간 이론입니다.

## 📐 벡터공간의 정의

### 기본 개념
벡터공간 V는 다음 8개 공리를 만족하는 집합입니다:

**덧셈에 대한 성질**:
1. 닫힘성: u + v ∈ V
2. 교환법칙: u + v = v + u  
3. 결합법칙: (u + v) + w = u + (v + w)
4. 영벡터 존재: 0 ∈ V

**스칼라 곱에 대한 성질**:
5. 닫힘성: αv ∈ V
6. 분배법칙: α(u + v) = αu + αv
7. 분배법칙: (α + β)v = αv + βv  
8. 결합법칙: α(βv) = (αβ)v

## 🤖 로봇공학에서의 벡터공간

### 관절공간 (Configuration Space)
```
q ∈ ℝⁿ: 관절 좌표벡터
q = [q₁, q₂, ..., qₙ]ᵀ

n: 관절의 개수 (자유도)
```

**특징**:
- 유클리드 공간 ℝⁿ의 부분집합
- 관절 한계로 인한 제약 영역 존재
- 로봇의 모든 가능한 자세를 표현

### 작업공간 (Task Space)
```
x ∈ ℝᵐ: 작업좌표벡터
일반적으로 m = 6 (위치 3개 + 방향 3개)
```

**위치**: p = [x, y, z]ᵀ ∈ ℝ³
**방향**: 
- 오일러각: [φ, θ, ψ]ᵀ ∈ ℝ³  
- 축-각도: ω ∈ ℝ³
- 사원수: q ∈ ℍ (4차원)

### 속도공간
```
관절속도공간: q̇ ∈ ℝⁿ
작업속도공간: v ∈ ℝ⁶ (선속도 + 각속도)

관계식: v = J(q)q̇
```

## 🎯 부분공간과 직교성

### 자코비안의 부분공간
자코비안 J ∈ ℝ⁶ˣⁿ에 대해:

**열공간 (Range Space)**:
```
Range(J) = {Jq̇ | q̇ ∈ ℝⁿ}
```
- 실현 가능한 말단장치 속도들의 집합
- 차원: rank(J)

**영공간 (Null Space)**:
```
Null(J) = {q̇ ∈ ℝⁿ | Jq̇ = 0}
```
- 말단장치를 움직이지 않는 관절속도들
- 차원: n - rank(J)
- **여분 자유도**(redundant DOF) 활용에 핵심

### 직교 분해
```
ℝⁿ = Range(Jᵀ) ⊕ Null(J)
ℝ⁶ = Range(J) ⊕ Null(Jᵀ)
```

**직교 투영**:
```
P_N = I - J⁺J  (영공간으로의 투영)
P_R = JJ⁺      (열공간으로의 투영)
```

## 🔧 기저와 차원

### 기저 (Basis)
벡터공간 V의 기저는 다음을 만족하는 벡터들의 집합:
1. **선형독립**: 어떤 벡터도 다른 벡터들의 선형결합으로 표현 불가
2. **생성**: 모든 벡터를 이들의 선형결합으로 표현 가능

### 로봇공학 응용

**관절공간 기저**:
```
표준 기저: e₁ = [1,0,...,0]ᵀ, ..., eₙ = [0,0,...,1]ᵀ
각 기저는 하나의 관절만 움직이는 단위 움직임
```

**작업공간 기저**:
```
위치: e_x = [1,0,0,0,0,0]ᵀ, e_y = [0,1,0,0,0,0]ᵀ, e_z = [0,0,1,0,0,0]ᵀ
회전: e_rx = [0,0,0,1,0,0]ᵀ, e_ry = [0,0,0,0,1,0]ᵀ, e_rz = [0,0,0,0,0,1]ᵀ
```

## 📊 내적과 놈

### 내적 공간
내적 ⟨u,v⟩는 다음 성질을 만족:
1. 양정치성: ⟨v,v⟩ ≥ 0, 등호는 v = 0일 때만
2. 대칭성: ⟨u,v⟩ = ⟨v,u⟩  
3. 선형성: ⟨αu + βv, w⟩ = α⟨u,w⟩ + β⟨v,w⟩

### 로봇공학에서의 놈

**에너지 놈**:
```
||q̇||²_M = q̇ᵀM(q)q̇  (관성 가중 놈)
M(q): 관성행렬
```

**작업공간 놈**:
```
||v||²_Λ = vᵀΛv
Λ: 작업공간 관성행렬
```

## 🚀 실제 응용

### 여분 자유도 로봇
n > m인 경우 (과구동 시스템):

**주작업**: x = f(q)
**부작업**: 영공간에서의 최적화
```
q̇ = J⁺ẋ + (I - J⁺J)q̇₀
```
- J⁺ẋ: 주작업 해결
- (I - J⁺J)q̇₀: 부작업 (충돌회피, 특이점 회피 등)

### 제약 운동
**등식 제약**: Φ(q) = 0
```
제약 자코비안: Φ_q = ∂Φ/∂q
허용 운동: q̇ ∈ Null(Φ_q)
```

## 🎯 특수한 벡터공간

### 접선공간 (Tangent Space)
매니폴드 상의 점에서 정의되는 벡터공간:
```
T_q Q: 구성공간 Q의 점 q에서의 접선공간
차원: dim(T_q Q) = dim(Q)
```

### 트위스트 공간
강체운동의 속도를 나타내는 6차원 벡터공간:
```
V = [v] ∈ ℝ⁶
    [ω]

v ∈ ℝ³: 선속도
ω ∈ ℝ³: 각속도
```

## 📚 구현 및 도구

### MATLAB/Python 예제
```matlab
% 자코비안의 영공간 계산
[U, S, V] = svd(J);
null_space = V(:, rank(J)+1:end);

% 영공간 투영 행렬
P_null = eye(n) - pinv(J)*J;
```

### 수치적 고려사항
1. **특이값 임계값**: σ < ε인 특이값은 0으로 처리
2. **수치적 영공간**: 완전한 0이 아닌 작은 값들도 고려
3. **조건수 모니터링**: 특이점 근처에서 주의 필요

## 🎯 학습 로드맵

1. **기초 이론** (2-3주)
   - 벡터공간의 정의와 성질
   - 기저, 차원, 내적의 개념

2. **로봇 응용** (3-4주)  
   - 관절공간과 작업공간
   - 자코비안의 부분공간들

3. **고급 개념** (2-3주)
   - 제약 시스템과 매니폴드
   - 트위스트와 스크류 이론

4. **실습** (2-3주)
   - 수치 구현과 시뮬레이션
   - 실제 로봇 시스템 적용

---
*참고: Linear Algebra (Strang), Modern Robotics (Lynch & Park), Robotics: Modelling, Planning and Control (Siciliano)*