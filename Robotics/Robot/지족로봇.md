# 지족로봇 (Limbed Robots)

## 📖 주요 참고문헌
> **핵심 교과서**: *Legged Robots That Balance* by Marc H. Raibert (1986, MIT Press)
> - 지족로봇학의 고전적 명저
> - 동적 균형 기반 보행 제어의 기초 확립

## 🎯 정의 및 특징

**지족로봇**은 다리(legs)를 이용하여 이동하는 로봇으로, 정적 또는 동적 균형을 통해 불규칙한 지형에서도 이동할 수 있는 로봇입니다.

### 🦵 구조적 분류
```
일족 → 이족 → 사족 → 다족 (6족, 8족)
- 다리 수가 많을수록 안정성 증가
- 다리 수가 적을수록 기동성 증가
- 에너지 효율성은 다리 수와 반비례
```

### ⚡ 장점
- **지형 적응성**: 계단, 장애물, 불규칙 지형 이동
- **에너지 효율**: 걷기 시 바퀴보다 효율적
- **기동성**: 좁은 공간, 복잡한 환경 통과
- **충격 흡수**: 착지 시 자연스러운 완충

### ⚠️ 도전 과제
- **복잡한 제어**: 다자유도 시스템 제어
- **안정성**: 동적 균형 유지 어려움
- **에너지 소모**: 달리기 시 높은 소모
- **기계적 복잡성**: 많은 관절과 액추에이터

## 🔧 Raibert의 동적 균형 이론

### 1. 기본 원리
**동적 균형**: 정적 안정성에 의존하지 않고, 운동 중에 균형을 유지하는 방법

#### 핵심 아이디어
```
정적 안정 → 동적 안정
- 무게중심이 지지면 밖에 있어도 OK
- 다음 스텝으로 균형 회복
- 연속적인 낙하와 회복의 반복
```

### 2. 3가지 분리된 제어 (Decoupled Control)

#### A. 호핑 높이 제어 (Hopping Height Control)
```
목표: 일정한 호핑 높이 유지

제어 입력: 스프링 압축량 또는 액추에이터 에너지
측정값: 이전 호핑의 최고점 높이
제어법: 에너지 기반 피드백

E_desired = m*g*h_desired
ΔE = E_desired - E_previous
```

#### B. 전진 속도 제어 (Forward Speed Control)
```
목표: 원하는 전진 속도 달성

제어 입력: 발 착지 위치 (foot placement)
측정값: 현재 전진 속도
제어법: 착지점 조절

x_foot = x_body + (v_current - v_desired) * T_stance/2
```

#### C. 자세 제어 (Body Attitude Control)
```
목표: 몸체 자세 안정화 (pitch, roll)

제어 입력: 다리와 몸체 간 토크
측정값: 몸체 기울기 각도
제어법: PD 제어

τ = Kp(θ_desired - θ) + Kd(ω_desired - ω)
```

### 3. 일족에서 다족으로 확장

#### 가상 다리 개념 (Virtual Leg)
```
다족 로봇을 하나의 가상 다리로 모델링
- 모든 지면 접촉 다리의 힘을 합성
- 무게중심과 지면 간의 등가 스프링-댐퍼
- 같은 제어 알고리즘 적용 가능
```

## 🦿 기구학 및 동역학

### 1. 다리 기구학

#### 순기구학 (Forward Kinematics)
```
관절 각도 → 발끝 위치

다리 관절: θ_hip, θ_knee, θ_ankle
발끝 위치: (x_foot, y_foot, z_foot)

x_foot = l₁cos(θ_hip) + l₂cos(θ_hip + θ_knee)
y_foot = l₁sin(θ_hip) + l₂sin(θ_hip + θ_knee)
```

#### 역기구학 (Inverse Kinematics)
```
발끝 위치 → 관절 각도

해석적 해: 2D 평면에서 가능
수치적 해: 3D 공간에서 필요
제약 조건: 관절 한계, 특이점 회피
```

### 2. 동역학 모델링

#### 지면 접촉 모델
```python
# 스프링-댐퍼 모델
def ground_force(z_foot, z_dot_foot):
    if z_foot <= 0:  # 지면 접촉
        F_spring = -k * z_foot
        F_damper = -c * z_dot_foot
        return F_spring + F_damper
    else:
        return 0  # 공중
```

#### SLIP 모델 (Spring-Loaded Inverted Pendulum)
```
간단화된 보행 모델
- 몸체: 점 질량
- 다리: 무질량 스프링
- 지면 접촉 시: 압축/해제
- 공중 시: 포물선 운동
```

### 3. 보행 주기 (Gait Cycle)

#### 이족 보행
```
보행 주기 = 2단계
1. 입각상 (Stance): 한쪽 다리 지면 접촉
2. 유각상 (Swing): 다리 공중에서 이동

주기: 0.5-1.5초 (인간 기준)
```

#### 사족 보행
```
걷기 (Walk): 최소 3다리 지지
속보 (Trot): 대각선 다리 쌍 교대
구보 (Pace): 같은 쪽 다리 쌍 교대
질주 (Bound): 앞/뒤 다리 쌍 교대
갤럽 (Gallop): 비대칭 보행
```

## ⚖️ 안정성 분석

### 1. 정적 안정성
#### 안정성 여유 (Stability Margin)
```
안정성 여유 = 무게중심에서 지지면 경계까지 최단거리
조건: 무게중심이 지지면 내부에 위치
적용: 저속 이동, 정밀 작업
```

### 2. 동적 안정성
#### ZMP (Zero Moment Point)
```
모든 관성력과 중력의 합력이 
지면에 만드는 모멘트가 0인 점

ZMP가 지지면 내부 → 안정
ZMP가 지지면 외부 → 불안정
```

#### Capture Point
```
로봇이 현재 상태에서 한 번의 스텝으로
정지할 수 있는 지면상의 점

CP = CoM + CoM_velocity / ω₀
ω₀ = √(g/z_CoM): 고유 진동수
```

### 3. 궤도 안정성
#### Poincaré Map
```
보행의 주기적 특성 분석
- 각 스텝의 상태를 맵핑
- 고정점: 주기적 보행
- 안정성: 고정점의 eigenvalue
```

## 🔄 제어 전략

### 1. 반사 기반 제어 (Reflex-Based Control)
```python
def reflex_control(sensor_data):
    """생물학적 반사 모방"""
    
    if stumble_detected():
        return stumble_reflex()
    elif uneven_ground():
        return terrain_adaptation()
    else:
        return normal_gait()
```

### 2. 모델 예측 제어 (MPC)
```python
def mpc_walking_control(current_state, horizon):
    """미래 N스텝 최적화"""
    
    for t in range(horizon):
        # 상태 예측
        x_pred[t+1] = dynamics(x_pred[t], u[t])
        
        # 비용 함수
        cost += step_cost(x_pred[t], u[t])
    
    # 최적 제어 입력 계산
    u_optimal = minimize(cost)
    return u_optimal[0]  # 첫 번째만 적용
```

### 3. 학습 기반 제어
#### 강화학습 (Reinforcement Learning)
```
상태: 관절 각도, 속도, 자세
행동: 관절 토크
보상: 전진 속도 + 안정성 - 에너지
정책: 신경망 기반 제어기
```

#### 모방학습 (Imitation Learning)
```
전문가 데이터: 인간/동물 보행 데이터
정책 학습: 전문가 행동 모방
개선: 자체 경험으로 정책 개선
```

## 🎯 센서 시스템

### 1. 관성 센서
- **IMU**: 자세, 각속도, 가속도
- **자이로스코프**: 회전 속도 측정
- **가속도계**: 중력 방향, 가속도

### 2. 접촉 센서
- **힘 센서**: 지면 반력 측정
- **토크 센서**: 관절 토크 측정
- **압력 센서**: 발바닥 압력 분포

### 3. 위치 센서
- **엔코더**: 관절 각도 측정
- **LIDAR**: 주변 지형 매핑
- **카메라**: 시각 기반 네비게이션

## 🏭 응용 분야

### 1. 서비스 로봇
- **가정용 로봇**: 계단 오르내리기
- **물류 로봇**: 창고 내 이동
- **경비 로봇**: 순찰, 감시

### 2. 탐사 로봇
- **우주 탐사**: 화성 표면 이동
- **해저 탐사**: 해저 지형 이동
- **재해 현장**: 구조 작업

### 3. 군사 로봇
- **정찰 로봇**: 적진 침투
- **운반 로봇**: 군수품 수송
- **전투 지원**: 험지 이동

### 4. 의료 로봇
- **재활 로봇**: 보행 훈련
- **외골격**: 보행 보조
- **의족**: 능동 제어

## 📊 성능 지표

### 1. 이동 성능
- **보행 속도**: 0.5-8 km/h
- **계단 오르기**: 15-30 cm 높이
- **경사로**: 30-45° 기울기
- **장애물**: 다리 길이의 50-80%

### 2. 에너지 효율
- **전력 소모**: 100-1000W (100kg 로봇 기준)
- **COT (Cost of Transport)**: 0.1-1.0
- **배터리 지속**: 1-8시간

### 3. 안정성
- **낙상률**: 1회/1000스텝 이하
- **회복 시간**: 1-3초
- **외란 저항**: 체중의 10-30%

## 🤖 대표 로봇 사례

### 1. 이족 로봇
- **ASIMO (Honda)**: 계단, 울퉁불퉁한 지면
- **Atlas (Boston Dynamics)**: 역동적인 움직임
- **HRP 시리즈**: 일본 휴머노이드 프로젝트

### 2. 사족 로봇
- **BigDog (Boston Dynamics)**: 군용 운반로봇
- **Spot (Boston Dynamics)**: 상용 검사로봇
- **ANYmal (ETH Zurich)**: 연구용 플랫폼

### 3. 다족 로봇
- **RHex**: 6족 러닝 로봇
- **거미 로봇**: 8족 보행
- **곤충 로봇**: 생체모방 다족

## 📈 최신 연구 동향

### 1. AI 융합
- **딥러닝**: 지형 인식, 보행 최적화
- **강화학습**: 적응적 보행 제어
- **컴퓨터 비전**: 실시간 경로 계획

### 2. 생체모방학
- **동물 보행 분석**: 개, 말, 치타의 보행
- **근육 모델링**: 인공 근육 개발
- **신경제어**: 중추신경계 모방

### 3. 하드웨어 혁신
- **경량 소재**: 탄소섬유, 티타늄
- **스마트 액추에이터**: 시리즈 탄성
- **에너지 저장**: 보행 중 에너지 회수

---

#지족로봇 #LeggedRobots #동적균형 #보행제어 #휴머노이드 #사족로봇