# 물체자코비안 (Body Jacobian)

> 상위: [[자코비안분석]] | 기본: [[자코비안]] | 대비: [[공간자코비안]]

말단 장치에 부착된 몸체 좌표계(body frame) {b}에서 정의된 자코비안으로, 관절 속도를 몸체 좌표계에서 표현된 말단 트위스트로 변환합니다.

## 🎯 기본 정의

### 수학적 표현
```
V_b = J_b(θ) θ̇
```

여기서:
- V_b: 몸체 좌표계에서 표현된 말단 트위스트 (6×1)
- J_b(θ): 물체 자코비안 (6×n)
- θ̇: 관절 속도 벡터 (n×1)

### 트위스트 구성
```
V_b = [v_b]  = [선속도 (몸체 좌표계)]
      [ω_b]    [각속도 (몸체 좌표계)]
```

## 📐 스크류 이론 기반 유도 (Modern Robotics)

### Product of Exponentials in Body Frame
순기구학 (몸체 형태):
```
T(θ) = M e^[B₁]θ₁ e^[B₂]θ₂ ... e^[Bₙ]θₙ
```

여기서:
- M: 영점 구성에서 말단 장치 변환
- Bᵢ: 몸체 좌표계에서 표현된 스크류 축

### 물체 자코비안 계산
```
J_b = [J_b₁, J_b₂, ..., J_bₙ]
```

각 열 J_bᵢ는 다음과 같이 계산됩니다:

#### 마지막 관절 (i=n)
```
J_bₙ = Bₙ
```

#### i번째 관절 (i<n)
```
J_bᵢ = Ad_{e^[Bᵢ₊₁]θᵢ₊₁ ... e^[Bₙ]θₙ} Bᵢ
```

## 🔄 공간자코비안과의 관계

### Adjoint 변환을 통한 관계
```
V_s = Ad_T V_b
J_s = Ad_T J_b
```

여기서 T는 몸체 좌표계에서 공간 좌표계로의 변환입니다.

### 역변환
```
J_b = Ad_{T⁻¹} J_s
```

## 🔧 전통적 계산 방법

### 회전 관절의 경우
i번째 회전 관절에 대해 몸체 좌표계에서:
```
J_vᵢ = R_b^T (zᵢ₋₁ × (pₙ - pᵢ₋₁))
J_ωᵢ = R_b^T zᵢ₋₁
```

### 직진 관절의 경우
```
J_vᵢ = R_b^T zᵢ₋₁
J_ωᵢ = 0
```

여기서:
- R_b: 몸체 좌표계의 회전 행렬
- zᵢ₋₁, pᵢ₋₁: 공간 좌표계에서 표현된 값들

## 📊 계산 예제

### 6-DOF 매니퓰레이터
일반적인 6-DOF 산업용 로봇의 경우:

몸체 스크류 축들:
```
B₁ = [0, 0, 1, 0, 0, 0]^T
B₂ = [0, -1, 0, 0, 0, 0]^T
...
```

물체 자코비안:
```
J_b = [J_b₁, J_b₂, J_b₃, J_b₄, J_b₅, J_b₆]
```

## ⚙️ 특성 및 장점

### 직관적 해석
- 말단 장치의 국소 좌표계에서 정의
- 말단 장치 중심의 제어에 적합

### 제어 응용
```matlab
% 몸체 좌표계 속도 제어
theta_dot = pinv(J_b) * V_b_desired;
```

### 힘 제어
```
τ = J_b^T F_b
```

## 📈 계산 알고리즘

### MATLAB/Python 구현 예제
```matlab
function J_b = body_jacobian(B_list, theta_list)
    % B_list: 몸체 스크류 축들 (6×n)
    % theta_list: 관절 각도들 (n×1)
    
    n = length(theta_list);
    J_b = zeros(6, n);
    T = eye(4);
    
    % 마지막 관절부터 역순으로 계산
    for i = n:-1:1
        J_b(:,i) = adjoint_rep(T) * B_list(:,i);
        if i > 1
            T = matrix_exp6(vector_to_so3(B_list(:,i)) * theta_list(i)) * T;
        end
    end
end
```

## 🎯 응용 분야

### 임피던스 제어
몸체 좌표계에서 정의된 임피던스:
```
F_b = K_p(x_d - x) + K_d(ẋ_d - ẋ)
```

### 하이브리드 제어
- 접촉면에 수직: 힘 제어
- 접촉면에 평행: 위치 제어

### 도구 중심 제어
도구 좌표계와 일치하는 제어 입력

## 🔍 특이점 분석

### 몸체 자코비안 특이점
```
det(J_b) = 0
```

특이점에서의 특성:
- 특정 방향으로 움직일 수 없음
- 무한한 관절 속도 요구
- 제어 성능 저하

## 📚 참고 문헌

### 핵심 교과서
1. **Lynch, K. M., & Park, F. C. (2017)**. *Modern Robotics: Mechanics, Planning, and Control*. Cambridge University Press.
   - Section 5.1.2: Body Jacobian
   - 스크류 이론 기반 체계적 유도
   - [온라인 비디오](https://modernrobotics.northwestern.edu/nu-gm-book-resource/5-1-2-body-jacobian/)

2. **Spong, M. W., Hutchinson, S., & Vidyasagar, M. (2020)**. *Robot Modeling and Control* (2nd ed.). Wiley.
   - Chapter 4: Velocity Kinematics - The Jacobian
   - 몸체 좌표계 접근법

3. **Craig, J. J. (2005)**. *Introduction to Robotics: Mechanics and Control* (4th ed.). Pearson.
   - Chapter 5: Velocities, Static Forces, and Jacobians

### 연구 논문
- Sciavicco, L., & Siciliano, B. (2000). *Modelling and Control of Robot Manipulators* (2nd ed.). Springer.

### 소프트웨어 도구
- [Modern Robotics Library](https://github.com/NxRLab/ModernRobotics)
- [Drake Robotics](https://drake.mit.edu/)
- [PyBullet](https://pybullet.org/)

---

## 🔗 연결 문서
- 상위: [[자코비안분석]]
- 기본: [[자코비안]]
- 비교: [[공간자코비안]]
- 응용: [[힘제어]], [[임피던스제어]], [[특이점분석]]