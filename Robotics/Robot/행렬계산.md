# 행렬계산

> 상위: [[선형대수및기하학]]

로봇공학에서 핵심적으로 사용되는 행렬 연산과 성질들을 다룹니다.

## 🔢 기본 행렬 연산

### 행렬 곱셈
로봇공학에서 행렬 곱셈은 좌표 변환의 합성을 의미합니다.

```
동차변환 합성: T₁₃ = T₁₂ × T₂₃
회전 합성: R₁₃ = R₁₂ × R₂₃
```

**중요한 성질**:
- 결합법칙: (AB)C = A(BC)
- **비교환성**: AB ≠ BA (일반적으로)
- 회전행렬의 곱은 회전의 합성을 의미

### 전치와 역행렬
```
회전행렬: R⁻¹ = Rᵀ (직교행렬의 성질)
동차변환: T⁻¹ = [R⁻¹  -R⁻¹p]
              [0     1  ]
```

## 🎯 로봇공학 특수 행렬

### 동차변환행렬 (4×4)
```
T = [R  p]  ∈ SE(3)
    [0  1]

R ∈ SO(3): 3×3 회전행렬
p ∈ ℝ³: 위치벡터
```

**연산 공식**:
- 역변환: T⁻¹ = [Rᵀ  -Rᵀp]
                [0    1  ]
- 합성: T₁₃ = T₁₂T₂₃

### 자코비안 행렬
로봇의 관절속도와 말단장치 속도를 연결하는 핵심 행렬입니다.

```
v = J(q)q̇

v ∈ ℝ⁶: 말단장치 속도 (선속도 + 각속도)
q̇ ∈ ℝⁿ: 관절속도
J(q) ∈ ℝ⁶ˣⁿ: 자코비안 행렬
```

**종류**:
- **Body Jacobian** (Jᵦ): 말단장치 좌표계 기준
- **Spatial Jacobian** (Jₛ): 기준 좌표계 기준

### 회전행렬 (3×3)
```
R ∈ SO(3) = {R ∈ ℝ³ˣ³ | RRᵀ = I, det(R) = 1}
```

**중요 성질**:
- 직교성: RRᵀ = I
- 행렬식: det(R) = 1
- 역행렬: R⁻¹ = Rᵀ

## 🔧 계산 기법

### 행렬 분해

**1. LU 분해**
- 연립방정식 해결에 효율적
- 로봇 동역학 방정식 해석에 활용

**2. QR 분해**
- 최소자승 문제 해결
- 자코비안의 특이점 분석

**3. SVD (특이값 분해)**
```
A = UΣVᵀ
```
- 자코비안의 의사역행렬 계산
- 운동학적 특이점 분석에 핵심

### 수치적 고려사항

**조건수 (Condition Number)**
```
κ(A) = σₘₐₓ/σₘᵢₙ
```
- 수치적 안정성의 지표
- 로봇 특이점 근처에서 급격히 증가

**의사역행렬**
```
A⁺ = VΣ⁺Uᵀ  (SVD 이용)
```

## 🚀 로봇공학 응용

### 순기구학
```
T = T₁T₂...Tₙ
```
연속된 동차변환행렬의 곱으로 말단장치 위치 계산

### 역기구학
```
f(q) = T_desired
```
비선형 방정식 시스템, 뉴턴-랩슨 방법 등 사용

### 동역학
```
M(q)q̈ + C(q,q̇)q̇ + G(q) = τ
```
- M(q): 관성행렬 (n×n)
- C(q,q̇): 코리올리/원심력 행렬 (n×n)
- G(q): 중력벡터 (n×1)

**관성행렬의 성질**:
- 대칭성: M(q) = Mᵀ(q)
- 양정치성: M(q) > 0

### 제어시스템
```
τ = Kₚe + Kᵥė + Kᵢ∫e dt
```
게인 행렬들의 적절한 설계가 핵심

## 📚 실용적 팁

### 효율적 계산
1. **행렬 곱셈 순서**: (AB)C vs A(BC) - 차원에 따라 연산량 차이
2. **블록 행렬**: 큰 시스템을 작은 블록으로 분할
3. **희소행렬**: 0이 많은 행렬의 특수 알고리즘 활용

### 구현 라이브러리
- **MATLAB**: Robotics Toolbox
- **Python**: NumPy, SciPy, robotics-toolbox-python
- **C++**: Eigen, Armadillo
- **ROS**: tf2, KDL

## 🎯 학습 순서

1. **기본 연산** (1-2주)
   - 행렬 곱셈, 전치, 역행렬
   - 특수 행렬들 (직교, 대칭, 양정치)

2. **로봇 특수 행렬** (2-3주)
   - 회전행렬과 동차변환행렬
   - 자코비안 행렬의 이해

3. **수치 기법** (2-3주)
   - 행렬 분해 기법들
   - 의사역행렬과 특이점 처리

4. **실제 응용** (3-4주)
   - 기구학/동역학 문제에 적용
   - 프로그래밍 실습

---
*참고: Modern Robotics (Lynch & Park), Introduction to Robotics (Craig)*