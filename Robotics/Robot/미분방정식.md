# 미분방정식

> 상위: [[해석학및미적분학]]

미지의 함수와 그 도함수들로 이루어진 방정식입니다. 로봇의 동적 해석, 제어 시스템, 궤적 계획 등 로봇공학의 핵심 이론적 기반을 제공합니다.

## 📊 기본 개념

### 정의
미분방정식(微分方程式, differential equation)은 미지의 함수와 그 함수의 도함수들로 이루어져 있는 방정식입니다. 일반적인 방정식처럼 미지수의 값이 아닌, 미지의 함수식에 따라 참, 거짓 여부가 달라지는 등식입니다.

**기본 구조:**
- 미지 함수: y(x), u(x,t) 등
- 도함수: y', y'', ∂u/∂t, ∂²u/∂x² 등  
- 독립 변수: x, t 등

### 분류 기준
```
독립변수의 수에 따라:
- 상미분방정식 (ODE): 1개 변수
- 편미분방정식 (PDE): 2개 이상 변수

최고차수에 따라:
- 1차, 2차, n차 미분방정식

선형성에 따라:
- 선형: 해의 중첩 원리 성립
- 비선형: 해석적 해 구하기 어려움
```

## 🎯 상미분방정식 (ODE)

### 기본 형태
미지함수가 일변수이면 상미분항만을 포함한 상미분방정식이 됩니다.

**1차 상미분방정식:**
```
dy/dx = f(x, y)
```

**고차 상미분방정식:**
```
y⁽ⁿ⁾ + aₙ₋₁y⁽ⁿ⁻¹⁾ + ... + a₁y' + a₀y = r(x)
```

### 해법 분류

#### 1차 미분방정식
- **변수분리법**: dy/dx = g(x)h(y)
- **완전미분방정식**: M(x,y)dx + N(x,y)dy = 0
- **적분인자법**: 적절한 적분인자를 곱해 완전미분화
- **선형 1차 방정식**: y' + p(x)y = r(x)

#### 고차 미분방정식
- **특성방정식법**: 상수계수 선형방정식
- **미정계수법**: 비동차 방정식의 특수해
- **매개변수 변화법**: 일반적 비동차 방정식

### 해의 분류
```
일반해 (General Solution):
- 임의 상수가 포함된 해
- 모든 가능한 해를 포함

특수해 (Particular Solution):
- 초기조건으로 상수가 결정된 해
- 특정 문제의 구체적 해답
```

## 🌊 편미분방정식 (PDE)

### 기본 개념
두 개 이상의 변수를 갖는 미지함수와 이에 대한 편미분항들이 등장하는 방정식입니다.

**일반 형태:**
```
F(x, y, u, ∂u/∂x, ∂u/∂y, ∂²u/∂x², ∂²u/∂y², ∂²u/∂x∂y) = 0
```

### 대표적 편미분방정식

#### 파동방정식 (Wave Equation)
```
∂²u/∂t² = c²∇²u
```
- 진동, 파동 현상 모델링
- 로봇 팔의 유연성 해석

#### 확산방정식 (Diffusion Equation)
```
∂u/∂t = D∇²u
```
- 열전도, 확산 현상
- 센서 신호 전파 모델링

#### 라플라스 방정식 (Laplace Equation)
```
∇²u = 0
```
- 정상상태 문제
- 전위장, 중력장 해석

### PDE 분류
```
2차 선형 PDE의 판별기준:
B² - 4AC의 값에 따라

< 0: 타원형 (Elliptic)
= 0: 포물선형 (Parabolic)  
> 0: 쌍곡선형 (Hyperbolic)
```

## 🤖 로봇공학에서의 응용

### 동역학 모델링
**라그랑지안 방법:**
```
오일러-라그랑지 방정식:
d/dt(∂L/∂q̇ᵢ) - ∂L/∂qᵢ = Qᵢ

여기서:
- L = T - V (라그랑지안)
- T: 운동에너지
- V: 위치에너지
- Qᵢ: 일반화된 힘
```

**로봇 동역학 방정식:**
```
M(q)q̈ + C(q,q̇)q̇ + G(q) = τ
```
- 이 방정식 자체가 2차 상미분방정식 시스템
- q: 관절 위치
- q̇, q̈: 관절 속도, 가속도

### 제어 시스템

#### 상태공간 표현
```
ẋ = Ax + Bu (상미분방정식)
y = Cx + Du

여기서 x는 상태벡터
```

#### PID 제어
```
u(t) = Kₚe(t) + Kᵢ∫e(τ)dτ + Kₑde(t)/dt
```
- 비례(P), 적분(I), 미분(D) 항의 조합
- 적분과 미분이 미분방정식의 핵심 연산

### 궤적 계획

#### 최적 궤적 문제
변분법을 통한 최적화:
```
δ∫F(t, q, q̇)dt = 0
```
- 오일러-라그랑지 방정식으로 귀결
- 최소 시간, 최소 에너지 궤적

#### 동적 시스템
```
밸런싱 로봇의 동역학:
θ̈ + (g/l)sin(θ) = u/Il

여기서:
- θ: 기울기 각도
- g: 중력가속도
- l: 길이
- u: 제어 입력
```

## 🔬 해법과 분석

### 해석적 방법
- **변수분리법**: 특별한 형태의 PDE
- **적분변환**: 라플라스, 푸리에 변환
- **특성곡선법**: 1차 PDE
- **그린함수**: 경계값 문제

### 수치적 방법
```
유한차분법 (Finite Difference):
∂u/∂t ≈ (uᵢⁿ⁺¹ - uᵢⁿ)/Δt

유한요소법 (Finite Element):
약해(weak form)로 변환 후 근사
```

### 안정성 해석
```
선형화를 통한 국소 안정성:
ẋ = f(x) → ẋ = Ax (평형점 근처)

리아푸노프 함수:
V̇ < 0이면 안정
```

## 🎛️ 제어 이론과의 연결

### 전달함수
라플라스 변환을 통해 미분방정식을 대수방정식으로 변환:
```
L{dy/dt} = sY(s) - y(0)
```

### 상태 피드백
```
u = -Kx
닫힌루프: ẋ = (A - BK)x
```

### 안정성 판정
```
특성방정식의 근이 좌반평면에 있으면 안정:
det(sI - A) = 0의 모든 근의 실부 < 0
```

## 💻 수치해석과 시뮬레이션

### 상미분방정식 수치해법
- **오일러 방법**: 가장 기본적
- **룽게-쿠타 방법**: 4차가 널리 사용
- **아담스 방법**: 다단계 방법

### 편미분방정식 수치해법
- **유한차분법**: 격자점에서 근사
- **유한요소법**: 약해 기반
- **스펙트럼 방법**: 푸리에 급수 이용

### 로봇 시뮬레이션
대부분의 로봇 시뮬레이션 소프트웨어는 미분방정식 수치해법을 기반으로 동작:
- MATLAB/Simulink
- Gazebo (물리 엔진)
- MuJoCo, Bullet 등

---

## 🔗 연결 분야
- 상위: [[해석학및미적분학]]
- 하위: [[편미분방정식]], [[수치해석]]
- 응용: [[동역학]] (라그랑지안 방법)
- 응용: [[제어시스템]] (상태공간, PID)
- 응용: [[궤적계획]] (변분법, 최적제어)
- 관련: [[라그랑지역학]], [[최적화이론]]

---

## 📖 참고 문헌
- [미분방정식 - 나무위키](https://namu.wiki/w/미분방정식)
- [상미분방정식 - 위키백과](https://ko.wikipedia.org/wiki/상미분방정식)
- [밸런싱 로봇 동역학 모델](https://pinkwink.kr/309)
- [쿼드콥터 동역학 방정식](https://pinkwink.kr/58)
- [로봇 동역학 모델링 - Motion Planning 가이드](https://wikidocs.net/285024)