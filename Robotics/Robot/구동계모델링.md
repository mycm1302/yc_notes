# 구동계모델링

> 상위: [[동역학]]

모터, 기어, 마찰 등 실제 로봇 구동 시스템의 동역학적 특성을 모델링하는 분야입니다.

## 📐 기본 개념

### 정의
구동계모델링(Actuation Modeling)은 이상적인 토크 입력 대신 실제 모터, 기어박스, 마찰 등의 물리적 특성을 고려한 동역학 모델링입니다 [1].

### 전체 시스템 구조
```
전기 입력 → 모터 → 기어박스 → 링크 → 말단장치
```

각 단계에서 에너지 손실과 동역학적 효과가 발생합니다.

## ⚙️ DC 모터 모델링

### 전기적 모델
**전압 방정식:**
```
V = Ri + L(di/dt) + Ke·ωm
```

여기서:
- V: 모터 인가 전압
- R: 저항
- L: 인덕턴스  
- i: 전류
- Ke: 역기전력 상수
- ωm: 모터 각속도

### 기계적 모델
**토크 방정식:**
```
τm = Kt·i
Jm·ω̇m = τm - τl - Bm·ωm
```

여기서:
- τm: 모터 토크
- Kt: 토크 상수
- Jm: 모터 관성
- τl: 부하 토크
- Bm: 모터 점성 마찰

### 정상상태 관계
전기적 시정수가 기계적 시정수보다 훨씬 작은 경우:
```
L ≈ 0  (인덕턴스 무시)
V = Ri + Ke·ωm = R(τm/Kt) + Ke·ωm
```

따라서:
```
τm = (Kt/R)(V - Ke·ωm)
```

## 🔧 기어박스 모델링

### 기본 관계
**기어비 정의:**
```
n = ωm/ωl = τl/τm
```

여기서:
- n: 기어비 (감속비)
- ωl: 링크 각속도
- τl: 링크 토크

### 반사 관성 (Reflected Inertia)
기어를 통해 모터 축으로 반사된 링크 관성:
```
Jref = n²·Jl
```

여기서 Jl은 링크 관성

**전체 모터 축 관성:**
```
Jm_total = Jm + Jref = Jm + n²·Jl
```

### 기어 효율성
**효율 모델:**
```
τl = η·τm/n  (모터 → 링크)
τm = τl/(η·n)  (링크 → 모터)
```

여기서 η는 기어 효율 (0.7 ~ 0.95)

### 백래시 모델
**데드존 모델:**
```
τgear = {
  k(θm/n - θl - δ)  if θm/n - θl > δ
  0                  if |θm/n - θl| ≤ δ  
  k(θm/n - θl + δ)  if θm/n - θl < -δ
}
```

여기서:
- δ: 백래시 각도
- k: 기어 강성

## 🌪️ 마찰 모델링

### 1. 쿨롱 마찰 (Coulomb Friction)
```
τf = μc·sign(ω)
```

여기서:
- μc: 쿨롱 마찰 계수
- sign(ω): 속도의 부호

### 2. 점성 마찰 (Viscous Friction)
```
τf = μv·ω
```

여기서 μv는 점성 마찰 계수

### 3. 정지 마찰 (Static/Stiction)
```
τf = {
  μs·sign(τ)  if ω = 0 and |τ| < μs
  μs·sign(ω)  if ω ≠ 0
}
```

### 4. 스트리벡 효과 (Stribeck Effect)
속도가 낮을 때 마찰이 증가하는 현상:
```
τf = [μc + (μs - μc)·e^(-(ω/ωs)^δs)]·sign(ω) + μv·ω
```

여기서:
- μs: 정지 마찰 계수
- ωs: 스트리벡 속도
- δs: 스트리벡 지수

### 5. LuGre 모델
동적 마찰 모델:
```
τf = σ0·z + σ1·ż + σ2·ω
ż = ω - σ0·|ω|·z/g(ω)
g(ω) = μc + (μs - μc)·e^(-(ω/ωs)^2)
```

여기서:
- z: 강모 변형 상태 변수
- σ0, σ1, σ2: 모델 매개변수

## 🔗 전체 시스템 동역학

### 단일 조인트 모델
**모터 축 방정식:**
```
Jm_total·ω̇m = τm - τf_motor - τl/n
```

**링크 축 방정식:**
```
Jl·ω̇l = τl - τf_link - τext
```

**기어 관계:**
```
ωl = ωm/n
ω̇l = ω̇m/n
```

### 다관절 로봇 확장
**n개 조인트 시스템:**
```
(M(q) + Jm)q̈ + C(q,q̇)q̇ + G(q) + F(q̇) = τ
```

여기서:
- Jm = diag[Jm1, Jm2, ..., Jmn]: 모터 관성 행렬
- F(q̇): 마찰 벡터
- τ: 모터 토크 벡터

### 뉴턴-오일러 수정 알고리즘
모터 관성을 고려한 역동역학:

**전진 반복:**
```
ᵢωᵢ = ᵢ⁻¹Rᵢ·ᵢ⁻¹ωᵢ₋₁ + q̇ᵢzᵢ
ᵢαᵢ = ᵢ⁻¹Rᵢ·ᵢ⁻¹αᵢ₋₁ + ᵢωᵢ × q̇ᵢzᵢ + q̈ᵢzᵢ
```

**후진 반복:**
```
τᵢ = ᵢnᵢᵀ·zᵢ + Jmᵢ·q̈ᵢ + fᵢ(q̇ᵢ)
```

## 📊 매개변수 식별

### 모터 매개변수
**무부하 시험:**
- 관성 Jm: 자유 회전 감쇠 측정
- 마찰 Bm: 정상상태 속도-토크 관계
- 전기 상수: 전압-전류-속도 측정

**부하 시험:**
- 토크 상수 Kt: 정지 토크 측정
- 역기전력 Ke: 발전기 모드 측정

### 마찰 매개변수
**정적 식별:**
```
τ = μc·sign(ω) + μv·ω + τ0
```

최소제곱법으로 μc, μv 추정

**동적 식별:**
정현파 입력에 대한 응답으로 동적 마찰 매개변수 추정

### 기어 매개변수
**백래시 측정:**
- 정/역방향 토크 인가 시 위치 차이
- 임피던스 측정으로 강성 추정

## 🎯 제어 시스템 설계

### 모터 전류 제어
**PI 제어기:**
```
V = Kp(iref - i) + Ki∫(iref - i)dt + Ke·ωm
```

### 속도 제어
**PI 제어기 + 피드포워드:**
```
iref = Kpv(ωref - ω) + Kiv∫(ωref - ω)dt + Jm·ω̇ref/Kt
```

### 마찰 보상
**모델 기반 보상:**
```
τcomp = f̂(ω, ω̇) = μ̂c·sign(ω) + μ̂v·ω
```

**적응 보상:**
```
τcomp = Φ(ω, ω̇)θ̂
θ̇̂ = -Γ·Φᵀ(ω, ω̇)·e
```

여기서 e는 추종 오차

## 🔍 고려사항

### 모델링 정확도 vs 복잡도
- **간단한 모델**: 점성 + 쿨롱 마찰
- **중간 모델**: 스트리벡 효과 포함
- **복잡한 모델**: LuGre 동적 마찰

### 실시간 구현
- **계산 부하**: 복잡한 마찰 모델의 실시간성
- **센서 요구사항**: 위치, 속도, 전류 센서
- **제어 주기**: 전류 루프 > 속도 루프 > 위치 루프

### 안전 고려사항
- **과열 보호**: 모터 열 모델링
- **과전류 보호**: 전류 제한
- **비상 정지**: 브레이크 시스템 모델링

## 📚 참고문헌

[1] Lynch, K.M., & Park, F.C. (2017). *Modern Robotics: Mechanics, Planning, and Control*. Cambridge University Press.
- Chapter 8.9: Actuation, Gearing, and Friction, pp. 303-315

[2] Spong, M.W., Hutchinson, S., & Vidyasagar, M. (2020). *Robot Modeling and Control*. 2nd Edition, Wiley.
- Chapter 6: Dynamics, Section 6.8: Actuator Dynamics

[3] Canudas de Wit, C., et al. (1995). "A New Model for Control of Systems with Friction". *IEEE Transactions on Automatic Control*, 40(3), 419-425.
- LuGre 마찰 모델의 원저

[4] Armstrong-Hélouvry, B., Dupont, P., & Canudas de Wit, C. (1994). "A Survey of Models, Analysis Tools and Compensation Methods for the Control of Machines with Friction". *Automatica*, 30(7), 1083-1138.
- 마찰 모델링 종합 리뷰

[5] Bittencourt, A.C., & Gunnarsson, S. (2012). "Static Friction in a Robot Joint: Modeling and Identification of Load and Temperature Effects". *Journal of Dynamic Systems, Measurement, and Control*, 134(5), 051013.
- 온도와 부하의 마찰 영향

[6] Craig, J.J. (2017). *Introduction to Robotics: Mechanics and Control*. 4th Edition, Pearson.
- Chapter 6: Manipulator Dynamics, Section 6.7: Actuator Dynamics

---

## 🔗 연결 분야
- **상위**: [[동역학]]
- **관련**: [[마찰모델링]], [[동역학모델]]
- **응용**: [[로봇제어기법]], [[적응제어]]

## 태그
#구동계 #모터모델링 #기어박스 #마찰 #actuator #gearing