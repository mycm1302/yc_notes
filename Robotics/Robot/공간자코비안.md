# 공간자코비안 (Space Jacobian)

> 상위: [[자코비안분석]] | 기본: [[자코비안]] | 대비: [[물체자코비안]]

고정된 공간 좌표계(space frame) {s}에서 정의된 자코비안으로, 관절 속도를 공간 좌표계에서 표현된 말단 트위스트로 변환합니다.

## 🎯 기본 정의

### 수학적 표현
```
V_s = J_s(θ) θ̇
```

여기서:
- V_s: 공간 좌표계에서 표현된 말단 트위스트 (6×1)
- J_s(θ): 공간 자코비안 (6×n)
- θ̇: 관절 속도 벡터 (n×1)

### 트위스트 구성
```
V_s = [v_s]  = [선속도 (공간 좌표계)]
      [ω_s]    [각속도 (공간 좌표계)]
```

## 📐 스크류 이론 기반 유도 (Modern Robotics)

### Product of Exponentials (POE) 공식
순기구학:
```
T(θ) = e^[S₁]θ₁ e^[S₂]θ₂ ... e^[Sₙ]θₙ M
```

### 공간 자코비안 계산
```
J_s = [J_s₁, J_s₂, ..., J_sₙ]
```

각 열 J_sᵢ는 다음과 같이 계산됩니다:

#### 첫 번째 관절 (i=1)
```
J_s₁ = S₁
```

#### i번째 관절 (i>1)
```
J_sᵢ = Ad_{e^[S₁]θ₁ ... e^[Sᵢ₋₁]θᵢ₋₁} Sᵢ
```

여기서:
- Sᵢ: i번째 관절의 스크류 축 (영점 구성에서)
- Ad_T: Adjoint 변환 행렬

## 🔧 전통적 계산 방법 (Craig, Spong)

### 회전 관절의 경우
i번째 회전 관절에 대해:
```
J_vᵢ = zᵢ₋₁ × (pₙ - pᵢ₋₁)
J_ωᵢ = zᵢ₋₁
```

### 직진 관절의 경우
i번째 직진 관절에 대해:
```
J_vᵢ = zᵢ₋₁
J_ωᵢ = 0
```

여기서:
- zᵢ₋₁: (i-1)번째 좌표계의 z축 방향 (공간 좌표계에서 표현)
- pₙ: 말단 장치 위치 (공간 좌표계에서 표현)
- pᵢ₋₁: (i-1)번째 관절 위치 (공간 좌표계에서 표현)

## 📊 계산 예제

### 2R 평면 로봇
2개의 회전 관절을 가진 평면 로봇의 경우:

```
J_s = [(-L₁s₁ - L₂s₁₂)  (-L₂s₁₂)]
      [(L₁c₁ + L₂c₁₂)   (L₂c₁₂) ]
      [0                 0       ]
      [0                 0       ]
      [0                 0       ]
      [1                 1       ]
```

여기서:
- s₁ = sin(θ₁), c₁ = cos(θ₁)
- s₁₂ = sin(θ₁ + θ₂), c₁₂ = cos(θ₁ + θ₂)
- L₁, L₂: 링크 길이

## ⚙️ Adjoint 변환

### Adjoint 행렬
동차변환행렬 T = [R p; 0 1]에 대해:
```
Ad_T = [R     0  ]
       [[p]R  R  ]
```

여기서 [p]는 p의 skew-symmetric 행렬입니다.

### 스크류 변환
```
S' = Ad_T S
```

## 🎯 특성 및 응용

### 좌표계 의존성
- 고정된 기준 좌표계 {s}에서 정의
- 로봇의 구성과 무관하게 일관된 기준점

### 제어 응용
```matlab
% 작업공간 속도 제어
theta_dot = pinv(J_s) * V_s_desired;
```

### 힘 변환
```
τ = J_s^T F_s
```

## 📈 계산 알고리즘

### MATLAB/Python 구현 예제
```matlab
function J_s = space_jacobian(S_list, theta_list)
    % S_list: 스크류 축들 (6×n)
    % theta_list: 관절 각도들 (n×1)
    
    n = length(theta_list);
    J_s = zeros(6, n);
    T = eye(4);
    
    for i = 1:n
        J_s(:,i) = adjoint_rep(T) * S_list(:,i);
        T = T * matrix_exp6(vector_to_so3(S_list(:,i)) * theta_list(i));
    end
end
```

## 📚 참고 문헌

### 핵심 교과서
1. **Lynch, K. M., & Park, F. C. (2017)**. *Modern Robotics: Mechanics, Planning, and Control*. Cambridge University Press.
   - Section 5.1.1: Space Jacobian
   - 스크류 이론 기반 체계적 접근
   - [온라인 비디오](https://modernrobotics.northwestern.edu/nu-gm-book-resource/5-1-1-space-jacobian/)

2. **Spong, M. W., Hutchinson, S., & Vidyasagar, M. (2020)**. *Robot Modeling and Control* (2nd ed.). Wiley.
   - Chapter 4.1: Velocity Kinematics - The Jacobian

3. **Craig, J. J. (2005)**. *Introduction to Robotics: Mechanics and Control* (4th ed.). Pearson.
   - Chapter 5: Velocities, Static Forces, and Jacobians

### 소프트웨어 도구
- [Modern Robotics Library](https://github.com/NxRLab/ModernRobotics)
- [Robotics Toolbox (MATLAB)](https://petercorke.com/toolboxes/robotics-toolbox/)

---

## 🔗 연결 문서
- 상위: [[자코비안분석]]
- 기본: [[자코비안]]
- 비교: [[물체자코비안]]
- 응용: [[속도기구학]], [[특이점분석]]