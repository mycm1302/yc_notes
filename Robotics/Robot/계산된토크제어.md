# Computed Torque Control (계산된 토크 제어)

## 1. 개요 및 배경

Computed Torque Control (CTC)은 로봇 매니퓰레이터 제어에서 가장 기본적이고 널리 사용되는 모델 기반 제어 기법입니다. 1980년대 초 Paul과 Luh에 의해 개발되어, 로봇 동역학의 비선형성과 결합성을 보상하여 각 관절을 독립적인 선형 시스템으로 만드는 것이 핵심 아이디어입니다.

### 1.1 기본 원리

CTC의 핵심 개념:
1. **동역학 보상**: 로봇의 복잡한 동역학을 계산하여 보상
2. **선형화**: 비선형 다변수 시스템을 선형 단일변수 시스템들로 분해
3. **분리**: 관절 간 결합을 제거하여 독립적 제어
4. **피드백**: 외란과 모델링 오차를 위한 피드백 추가

### 1.2 역사적 발전

- **1981년**: Luh, Walker, Paul이 기본 개념 제시
- **1982년**: Paul이 "Robot Manipulators: Mathematics, Programming, and Control"에서 체계화
- **1980년대**: Craig, Spong 등이 이론적 기반 확립
- **1990년대**: 적응형 및 강인 CTC 발전
- **현재**: 여전히 산업용 로봇의 표준 제어 방법

### 1.3 장점과 응용

**주요 장점**:
- 이론적 명확성
- 우수한 추종 성능
- 체계적 설계 방법
- 널리 검증된 기법

**응용 분야**:
- 산업용 로봇 매니퓰레이터
- 정밀 위치 제어
- 고속 궤적 추종
- 반복 작업
## 2. 수학적 기초

### 2.1 로봇 동역학 모델

n자유도 로봇 매니퓰레이터의 동역학:
$$M(q)\ddot{q} + C(q,\dot{q})\dot{q} + G(q) = \tau$$

여기서:
- q ∈ ℝⁿ: 관절 위치
- M(q) ∈ ℝⁿˣⁿ: 관성 행렬 (대칭, 양정치)
- C(q,q̇) ∈ ℝⁿˣⁿ: 코리올리/원심력 행렬
- G(q) ∈ ℝⁿ: 중력 벡터
- τ ∈ ℝⁿ: 관절 토크

### 2.2 CTC 설계

**설계 목표**: 각 관절 i에 대해 다음을 달성
$$\ddot{q}_i = v_i$$

여기서 vᵢ는 새로운 제어 입력입니다.

**제어 법칙**:
$$\tau = M(q)v + C(q,\dot{q})\dot{q} + G(q)$$

이를 동역학 방정식에 대입하면:
$$M(q)\ddot{q} + C(q,\dot{q})\dot{q} + G(q) = M(q)v + C(q,\dot{q})\dot{q} + G(q)$$

따라서:
$$\ddot{q} = v$$

**결과**: 복잡한 비선형 다변수 시스템이 n개의 독립적인 이중 적분기로 변환됩니다.

### 2.3 외부 루프 설계

각 관절에 대해 독립적으로 선형 제어기 설계:
$$v_i = \ddot{q}_{d,i} + k_{d,i}(\dot{q}_{d,i} - \dot{q}_i) + k_{p,i}(q_{d,i} - q_i)$$

여기서:
- qd,i, q̇d,i, q̈d,i: 원하는 위치, 속도, 가속도
- kp,i, kd,i: 비례 및 미분 이득

**폐루프 동역학**:
$$\ddot{e}_i + k_{d,i}\dot{e}_i + k_{p,i}e_i = 0$$

여기서 eᵢ = qd,i - qᵢ는 추종 오차입니다.

### 2.4 벡터 형태

전체 시스템을 벡터 형태로 표현:
$$\mathbf{v} = \ddot{\mathbf{q}}_d + \mathbf{K}_d(\dot{\mathbf{q}}_d - \dot{\mathbf{q}}) + \mathbf{K}_p(\mathbf{q}_d - \mathbf{q})$$

여기서:
- **Kp** = diag(kp,1, ..., kp,n): 비례 이득 행렬
- **Kd** = diag(kd,1, ..., kd,n): 미분 이득 행렬

**최종 제어 법칙**:
$$\boldsymbol{\tau} = \mathbf{M}(\mathbf{q})[\ddot{\mathbf{q}}_d + \mathbf{K}_d\dot{\mathbf{e}} + \mathbf{K}_p\mathbf{e}] + \mathbf{C}(\mathbf{q},\dot{\mathbf{q}})\dot{\mathbf{q}} + \mathbf{G}(\mathbf{q})$$

## 3. 안정성 분석

### 3.1 이상적인 경우

정확한 모델이 주어진 경우:
$$\ddot{\mathbf{e}} + \mathbf{K}_d\dot{\mathbf{e}} + \mathbf{K}_p\mathbf{e} = \mathbf{0}$$

**안정성 조건**: Kp, Kd > 0이면 시스템은 점근적으로 안정

### 3.2 모델링 오차가 있는 경우

실제 동역학:
$$\mathbf{M}(\mathbf{q})\ddot{\mathbf{q}} + \mathbf{C}(\mathbf{q},\dot{\mathbf{q}})\dot{\mathbf{q}} + \mathbf{G}(\mathbf{q}) = \boldsymbol{\tau}$$

추정된 모델:
$$\hat{\mathbf{M}}(\mathbf{q})\ddot{\mathbf{q}} + \hat{\mathbf{C}}(\mathbf{q},\dot{\mathbf{q}})\dot{\mathbf{q}} + \hat{\mathbf{G}}(\mathbf{q}) = \boldsymbol{\tau}$$

**오차 동역학**:
$$\ddot{\mathbf{e}} + \mathbf{K}_d\dot{\mathbf{e}} + \mathbf{K}_p\mathbf{e} = \mathbf{M}^{-1}(\mathbf{q})\boldsymbol{\Delta}$$

여기서 **Δ**는 모델링 오차 항입니다.

**강인성**: 작은 모델링 오차에 대해서는 여전히 안정하지만, 큰 오차에서는 성능 저하 가능

## 4. 구현 고려사항

### 4.1 계산 복잡성

**필요한 계산**:
1. 관성 행렬 M(q) 계산
2. 코리올리 행렬 C(q,q̇) 계산  
3. 중력 벡터 G(q) 계산
4. 행렬-벡터 곱셈

**계산량**: O(n³) - n개 관절에 대해 세제곱 복잡도

### 4.2 실시간 구현

**요구사항**:
- 빠른 프로세서 (현재는 문제 없음)
- 정확한 관절 위치, 속도 측정
- 정확한 동역학 매개변수

**최적화 기법**:
- 효율적인 동역학 알고리즘 (Newton-Euler)
- 병렬 계산
- 룩업 테이블 활용

## 5. 변형과 확장

### 5.1 적응형 CTC

매개변수 불확실성을 다루는 적응형 버전:
$$\boldsymbol{\tau} = \hat{\mathbf{M}}(\mathbf{q})[\ddot{\mathbf{q}}_d + \mathbf{K}_d\dot{\mathbf{e}} + \mathbf{K}_p\mathbf{e}] + \hat{\mathbf{C}}(\mathbf{q},\dot{\mathbf{q}})\dot{\mathbf{q}} + \hat{\mathbf{G}}(\mathbf{q})$$

**적응 법칙**: 매개변수 추정치를 온라인으로 업데이트

### 5.2 강인 CTC

모델 불확실성에 대한 강인성 향상:
- H∞ 제어와 결합
- μ-synthesis 적용
- 슬라이딩 모드 항 추가

### 5.3 예측형 CTC

미래 궤적 정보를 활용:
$$\boldsymbol{\tau}(t) = \mathbf{M}(\mathbf{q}(t))\mathbf{v}(t) + \mathbf{h}(\mathbf{q}(t),\dot{\mathbf{q}}(t))$$

여기서 **v**(t)는 예측 지평선에서 최적화된 제어입니다.

## 6. 장단점 분석

### 6.1 장점

1. **이론적 명확성**: 수학적으로 엄밀한 설계
2. **우수한 성능**: 정확한 모델 하에서 완벽한 추종
3. **분리 특성**: 각 관절 독립적 설계 가능
4. **확장 용이**: 다양한 제어 기법과 결합 가능
5. **산업적 검증**: 오랜 사용 경험과 검증
6. **직관적 설계**: 이해하기 쉬운 구조

### 6.2 단점

1. **모델 의존성**: 정확한 동역학 모델 필요
2. **계산 복잡성**: 실시간 동역학 계산 부담
3. **매개변수 민감성**: 모델 오차에 민감
4. **강인성 제한**: 큰 불확실성에서 성능 저하
5. **외란 거부**: 외부 외란에 대한 제한적 성능

## 7. 최신 동향

### 7.1 지능형 CTC
- 신경망을 이용한 동역학 학습
- 퍼지 논리 기반 적응 이득 조정
- 강화학습과의 결합

### 7.2 분산 CTC
- 대규모 로봇 시스템을 위한 분산 계산
- 클라우드 기반 동역학 계산

### 7.3 경량화 CTC
- 모바일 로봇을 위한 계산 효율성 개선
- 근사 동역학 모델 활용

## 8. 관련 텍스트북 및 참고문헌

### 주요 텍스트북

1. **Craig, J. J. (2005)**. "Introduction to Robotics: Mechanics and Control" (3rd Edition). Pearson.
   - CTC의 명확한 설명과 구현
   - 로봇 제어의 기초서

2. **Spong, M. W., Hutchinson, S., & Vidyasagar, M. (2020)**. "Robot Modeling and Control" (2nd Edition). Wiley.
   - 이론적 기초와 최신 동향
   - CTC의 안정성 분석 포함

3. **Siciliano, B., Sciavicco, L., Villani, L., & Oriolo, G. (2009)**. "Robotics: Modelling, Planning and Control". Springer.
   - 유럽 관점의 로봇 제어 이론
   - CTC의 다양한 변형 다룸

### 중요 논문들
- **Luh, J. Y. S., Walker, M. W., & Paul, R. P. (1980)**. "On-line computational scheme for mechanical manipulators". ASME Journal of Dynamic Systems, Measurement, and Control.
- **Paul, R. P. (1981)**. "Robot Manipulators: Mathematics, Programming, and Control". MIT Press.
- **Craig, J. J. (1988)**. "Adaptive control of mechanical manipulators". IEEE Transactions on Automatic Control.

이 문서는 Craig의 "Introduction to Robotics"와 Spong 등의 "Robot Modeling and Control"을 주요 참고문헌으로 하여 작성되었습니다.
