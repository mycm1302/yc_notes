# 회전행렬

> 상위: [[회전표현]]
> 
> 레퍼런스: 
> - **Modern Robotics** - Lynch & Park (2017) - Chapter 3.2
> - **Wikipedia - Rotation matrix** (2025년 8월)
> - **Robotics Unveiled - Rotation Matrices** (2024년 4월)

3차원 공간에서 강체의 자세를 표현하는 가장 기본적이고 직관적인 방법입니다.

## 🔄 기본 정의

### 수학적 정의
회전행렬 R은 3×3 직교행렬로서 다음 조건을 만족합니다:
- **직교성**: R^T R = I (단위행렬)
- **특수성**: det(R) = 1 (오른손 좌표계)
- **길이 보존**: ||Rx|| = ||x|| (벡터 길이 불변)

### 특수직교군 SO(3)
모든 회전행렬의 집합을 특수직교군 SO(3)라고 하며, 다음과 같이 정의됩니다:

```
SO(3) = {R ∈ ℝ³×³ | R^T R = I, det(R) = 1}
```

SO(3)는 행렬 곱셈 연산에 대해 리 군(Lie group)을 형성하며, 3차원 매니폴드 구조를 가집니다.

---

## 📐 구조와 해석

### 열벡터 해석
회전행렬의 각 열벡터는 body frame의 좌표축을 space frame으로 표현한 것입니다:

```
R = [x̂_b  ŷ_b  ẑ_b] = [r₁₁ r₁₂ r₁₃]
                        [r₂₁ r₂₂ r₂₃]
                        [r₃₁ r₃₂ r₃₃]
```

- **x̂_b**: body frame의 x축을 space frame 좌표로 표현
- **ŷ_b**: body frame의 y축을 space frame 좌표로 표현  
- **ẑ_b**: body frame의 z축을 space frame 좌표로 표현

### 제약조건
9개 원소 중 6개의 제약조건이 있습니다:
- **단위벡터 조건** (3개): 각 열벡터의 크기가 1
- **직교성 조건** (3개): 열벡터들이 서로 직교
- **실제 자유도**: 3개 (3차원 회전의 자유도)

---

## 🎯 주요 특성

### 군(Group) 특성
SO(3)는 다음 군 특성을 만족합니다:

1. **항등원**: I ∈ SO(3) (단위행렬)
2. **닫힘성**: R₁, R₂ ∈ SO(3) ⟹ R₁R₂ ∈ SO(3)
3. **역원**: R ∈ SO(3) ⟹ R⁻¹ = R^T ∈ SO(3)
4. **결합성**: (R₁R₂)R₃ = R₁(R₂R₃)
5. **비가환성**: 일반적으로 R₁R₂ ≠ R₂R₁

### 기하학적 특성
회전행렬의 중요한 기하학적 성질들:
- **길이 보존**: 회전 후에도 벡터의 크기 유지
- **각도 보존**: 벡터 간의 각도 관계 유지
- **방향성 보존**: 오른손 좌표계 유지

---

## 🔧 세 가지 용도

회전행렬은 로봇공학에서 세 가지 주요 용도로 사용됩니다:

### 1. 자세 표현 (Orientation Representation)
강체나 좌표계의 자세를 표현:
```
R_sb: body frame {b}의 space frame {s}에 대한 자세
```

### 2. 좌표 변환 (Frame Change)
벡터나 좌표계의 기준 프레임 변경:
```
p_s = R_sb × p_b  (벡터의 좌표 변환)
R_sc = R_sb × R_bc  (연쇄 변환)
```

### 3. 회전 연산 (Rotation Operation)
벡터나 좌표계를 실제로 회전:
```
p'_s = R × p_s  (동일 프레임 내에서 벡터 회전)
```

---

## ⚙️ 기본 회전행렬

### X축 회전 (Roll)
```
R_x(φ) = [1    0      0   ]
         [0  cos φ -sin φ]
         [0  sin φ  cos φ]
```

### Y축 회전 (Pitch)  
```
R_y(θ) = [ cos θ  0  sin θ]
         [   0    1    0   ]
         [-sin θ  0  cos θ]
```

### Z축 회전 (Yaw)
```
R_z(ψ) = [cos ψ -sin ψ  0]
         [sin ψ  cos ψ  0]
         [  0      0    1]
```

---

## 🔗 각속도와의 관계

### 각속도 행렬
회전행렬의 시간 미분은 각속도와 다음 관계를 가집니다:

```
Ṙ = R × [ω]×
```

여기서 [ω]×는 각속도 벡터 ω의 반대칭 행렬(skew-symmetric matrix)입니다.

### 반대칭 행렬
```
[ω]× = [ 0   -ωz   ωy]
       [ ωz   0   -ωx]
       [-ωy   ωx   0 ]
```

---

## 💡 장단점 분석

### 장점
- **직관적**: 좌표축의 물리적 의미가 명확
- **조합 용이**: 행렬 곱셈으로 연쇄 회전 표현
- **수치 안정성**: 특이점 없음
- **선형 변환**: 벡터 변환이 선형

### 단점  
- **과다 매개변수**: 9개 원소로 3자유도 표현
- **제약조건**: 6개의 직교성 제약
- **저장 공간**: 메모리 사용량 많음
- **최적화 어려움**: 제약조건으로 인한 최적화 복잡성

---

## 🎯 로봇공학 응용

### 기구학 체인
- **연쇄 변환**: R_0n = R_01 × R_12 × ... × R_(n-1)n
- **순기구학**: 관절각에서 말단 자세 계산
- **역기구학**: 원하는 자세에서 관절각 계산

### 제어 시스템
- **자세 제어**: 목표 자세와 현재 자세 비교
- **궤적 생성**: 부드러운 회전 궤적 계획
- **동역학**: 회전 관성과 토크 계산

### 센서 융합
- **IMU 데이터**: 자이로스코프와 가속도계 융합
- **시각 시스템**: 카메라 외부 매개변수
- **다중 센서**: 여러 센서의 자세 정보 통합

---

## 🔗 연결 분야
- 상위: [[회전표현]]
- 기초: [[선형대수및기하학]] - 직교변환, 특수직교군
- 응용: [[순기구학]], [[역기구학]], [[동역학]]
- 대안: [[오일러각]], [[사원수]], [[축각표현]]

---

## 📚 참고문헌
1. Lynch, K.M. & Park, F.C. (2017). *Modern Robotics: Mechanics, Planning, and Control*. Cambridge University Press. Chapter 3.2
2. Wikipedia Contributors. (2025). "Rotation matrix." *Wikipedia*. Retrieved August 2025
3. Robotics Unveiled. (2024). "Representations of Orientation: Rotation Matrices." Retrieved August 2025
4. Wikipedia Contributors. (2025). "3D rotation group." *Wikipedia*. Retrieved August 2025