# 리군론

> 상위: [[선형대수및기하학]]

현대 로봇공학의 수학적 기초가 되는 리군(Lie Group) 이론입니다. 강체의 운동을 엄밀하고 효율적으로 다루는 핵심 도구입니다.

## 🎯 리군의 정의

### 기본 개념
리군 G는 다음을 만족하는 집합입니다:
1. **군의 성질**: 곱셈, 역원, 항등원이 정의됨
2. **매니폴드 구조**: 국소적으로 유클리드 공간과 같음
3. **매끄러운 연산**: 곱셈과 역원이 매끄러운 함수

### 로봇공학의 핵심 리군

**회전군 SO(3)**:
```
SO(3) = {R ∈ ℝ³ˣ³ | RRᵀ = I, det(R) = 1}
차원: 3
의미: 3차원 회전 변환들의 집합
```

**강체운동군 SE(3)**:
```
SE(3) = {T = [R p] | R ∈ SO(3), p ∈ ℝ³}
              [0 1]
차원: 6 (회전 3 + 평행이동 3)
의미: 강체의 모든 가능한 운동
```

## 🔍 리대수 (Lie Algebra)

### 정의
리군 G의 리대수 𝔤는 항등원에서의 접선공간:
```
𝔤 = T_I G (항등원 I에서의 접선공간)

물리적 의미: 무한소 운동을 나타내는 벡터공간
```

### 주요 리대수

**so(3) - 3차원 반대칭 행렬**:
```
ω̂ = [ 0   -ω₃  ω₂ ]  ∈ so(3)
    [ ω₃   0  -ω₁]
    [-ω₂  ω₁   0 ]

ω = [ω₁, ω₂, ω₃]ᵀ ∈ ℝ³: 각속도 벡터
```

**se(3) - 트위스트 좌표**:
```
ξ̂ = [ω̂  v] ∈ se(3)
    [0   0]

ξ = [v] ∈ ℝ⁶: 트위스트 벡터
    [ω]
```

## 🔄 지수 사상 (Exponential Map)

### 기본 공식
리대수에서 리군으로의 사상:
```
exp: 𝔤 → G
지수 사상을 통해 무한소 운동을 유한 운동으로 변환
```

### SO(3)에서의 지수 사상
**로드리게스 공식**:
```
exp(ω̂) = I + sin(||ω||)/||ω|| ω̂ + (1-cos(||ω||))/||ω||² ω̂²

||ω|| = 0인 경우: exp(ω̂) = I
||ω|| → 0인 경우: exp(ω̂) ≈ I + ω̂
```

### SE(3)에서의 지수 사상
```
exp(ξ̂) = [exp(ω̂)  Vv]
         [0       1 ]

V = I + (1-cos(θ))/θ² ω̂ + (θ-sin(θ))/θ³ ω̂²
θ = ||ω||
```

## 📊 리군의 성질

### 1. 군의 공리
```
결합법칙: (g₁g₂)g₃ = g₁(g₂g₃)
항등원: eG (단위행렬 I)
역원: g⁻¹ (g·g⁻¹ = e)
닫힘성: g₁, g₂ ∈ G ⟹ g₁g₂ ∈ G
```

### 2. 매끄러운 구조
- 국소 좌표계 존재
- 매끄러운 곡선과 접선벡터 정의 가능
- 미분과 적분 연산 가능

### 3. 컴팩트성
- SO(3): 컴팩트 (닫혀있고 유계)
- SE(3): 비컴팩트 (평행이동 무제한)

## 🤖 로봇공학에서의 활용

### 1. 회전 표현의 통일
```
기존 문제점:
- 오일러각: 특이점 존재
- 사원수: 중복 표현 (±q)
- 회전행렬: 6개 제약조건

리군 접근법:
- 자연스러운 최소 표현
- 특이점 없는 국소 좌표
- 기하학적 직관 제공
```

### 2. 운동학 방정식
```
전통적 방법: 복잡한 삼각함수
리군 방법: 행렬 지수함수

R(t) = exp(ω̂t)  (일정 각속도)
T(t) = exp(ξ̂t)  (일정 트위스트)
```

### 3. 속도와 가속도
```
각속도: ω = (dR/dt)Rᵀ ∨
트위스트: ξ = (dT/dt)T⁻¹ ∨

∨: vee 연산자 (행렬 → 벡터)
∧: hat 연산자 (벡터 → 행렬)
```

## 🎯 아드조인트 표현

### Adjoint 행렬
```
Ad_g: 𝔤 → 𝔤 (선형 변환)
Ad_g(ξ) = gξg⁻¹  (동일한 무한소 운동의 다른 표현)
```

### SO(3)의 Adjoint
```
Ad_R(ω) = Rω  (단순한 회전 변환)
Ad_R ∈ ℝ³ˣ³
```

### SE(3)의 Adjoint
```
Ad_T = [R    p̂R] ∈ ℝ⁶ˣ⁶
       [0    R  ]

T = [R p], p̂ = [0  -p₃  p₂]
    [0 1]      [p₃  0  -p₁]
               [-p₂ p₁  0 ]
```

## 🔧 실용적 알고리즘

### 1. 로그 사상 (Logarithm)
지수의 역변환: log: G → 𝔤
```
SO(3): ω = log(R)
θ = arccos((tr(R)-1)/2)
ω = θ/(2sin(θ)) (R - Rᵀ)∨

SE(3): ξ = log(T)
복잡한 공식이지만 수치적으로 안정
```

### 2. 보간 (Interpolation)
```
선형 보간: R(t) = R₁ exp(t log(R₁⁻¹R₂))
t ∈ [0,1]: R₁에서 R₂로의 최단 경로
```

### 3. 평균 계산
```
리군에서의 평균: 
R̄ = argmin_R Σᵢ ||log(R⁻¹Rᵢ)||²
반복 알고리즘으로 계산
```

## 📚 고급 개념

### 1. 킬링 형식 (Killing Form)
```
리대수의 내적 정의:
⟨X, Y⟩ = tr(ad_X ad_Y)
기하학적 거리 측정에 활용
```

### 2. 접속 (Connection)
```
공변 미분의 개념:
∇_X Y = 리만 접속을 통한 방향 미분
곡률과 비틀림 계산
```

### 3. 곡률 (Curvature)
```
리만 곡률 텐서:
R(X,Y)Z = ∇_X∇_Y Z - ∇_Y∇_X Z - ∇_{[X,Y]}Z
경로 계획에서 활용
```

## 🚀 실제 응용

### 1. SLAM (동시 위치추정 및 지도작성)
```
포즈 그래프 최적화:
min Σᵢⱼ ||log(Tᵢ⁻¹TᵢⱼTⱼ⁻¹)||²

Tᵢ: i번째 포즈
Tᵢⱼ: i에서 j로의 상대 변환
```

### 2. 로봇 보정
```
Hand-Eye 캘리브레이션:
AX = XB 문제를 리군에서 해결
A, B: 측정된 변환
X: 구하고자 하는 변환
```

### 3. 경로 계획
```
매끄러운 궤적 생성:
T(t) = T₀ exp(ξ̂(t))
제약조건을 만족하는 ξ(t) 설계
```

## 🔧 구현 예제

### MATLAB
```matlab
% Robotics Toolbox 사용
R = rotx(0.1) * roty(0.2) * rotz(0.3);
omega = vex(logm(R));  % 로그 사상
R_recovered = expm(skew(omega));  % 지수 사상
```

### Python
```python
import numpy as np
from scipy.linalg import expm, logm

def hat(omega):
    """벡터를 반대칭 행렬로 변환"""
    return np.array([[0, -omega[2], omega[1]],
                     [omega[2], 0, -omega[0]],
                     [-omega[1], omega[0], 0]])

def vee(omega_hat):
    """반대칭 행렬을 벡터로 변환"""
    return np.array([omega_hat[2,1], omega_hat[0,2], omega_hat[1,0]])

# 로드리게스 공식
def rodrigues(omega):
    theta = np.linalg.norm(omega)
    if theta < 1e-6:
        return np.eye(3) + hat(omega)
    else:
        return (np.eye(3) + 
                np.sin(theta)/theta * hat(omega) + 
                (1-np.cos(theta))/theta**2 * hat(omega) @ hat(omega))
```

## 🎯 학습 전략

1. **기하학적 직관** (3-4주)
   - 회전과 평행이동의 기하학적 의미
   - 리군과 리대수의 관계 이해

2. **수학적 기초** (4-5주)
   - 군론과 매니폴드 이론
   - 지수 사상과 로그 사상

3. **로봇 응용** (4-6주)
   - 운동학과 동역학에서의 활용
   - 실제 문제 해결 경험

4. **고급 주제** (선택, 4-6주)
   - 리만 기하학과의 연결
   - 최적화 이론에서의 활용

---
*참고: Modern Robotics (Lynch & Park), Lie Groups for Computer Vision (Barfoot), An Introduction to Lie Groups and Lie Algebras (Kirillov)*