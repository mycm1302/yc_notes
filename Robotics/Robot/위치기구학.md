# 위치기구학

> 상위: [[기구학]]

로봇의 관절 좌표와 말단 위치/자세 사이의 기하학적 관계를 다루는 기구학의 기본 분야입니다. 힘이나 토크를 고려하지 않고 순수한 기하학적 관계만을 분석합니다.

## 📚 핵심 개념

### 위치기구학의 정의
위치기구학은 로봇의 링크와 관절로 구성된 기구학적 체인에서 관절 매개변수와 말단의 위치 및 방향 사이의 관계를 연구하는 분야입니다.

- **링크(Links)**: 로봇에 구조를 제공하는 강체
- **관절(Joints)**: 링크를 연결하고 상대 운동을 허용하는 가동부
- **말단(End-effector)**: 로봇의 작업을 수행하는 최종 부분
- **기구학적 체인**: 링크와 관절이 연결된 전체 구조

### 관절의 종류
- **회전관절(Revolute Joint)**: 회전축 주위로 회전하는 관절
- **직선관절(Prismatic Joint)**: 직선 방향으로 병진하는 관절
- **연속관절(Continuous Joint)**: 각도 제한이 없는 회전관절

## 🎯 기구학 문제의 분류

### 순기구학 (Forward Kinematics)
관절 매개변수가 주어졌을 때 말단의 위치와 자세를 구하는 문제입니다.

**입력**: 관절 각도 θ₁, θ₂, ..., θₙ  
**출력**: 말단의 위치와 자세 (4×4 동차변환행렬)

```
Find T₀ⁿ(θ) given θᵢ, i ∈ [1, ..., n]
```

### 역기구학 (Inverse Kinematics)  
말단의 원하는 위치와 자세가 주어졌을 때 필요한 관절 각도를 구하는 문제입니다.

**입력**: 말단의 위치와 자세 (4×4 동차변환행렬)  
**출력**: 관절 각도 θ₁, θ₂, ..., θₙ

```
Find θᵢ given T₀ⁿ(desired)
```

## 🔧 Denavit-Hartenberg (DH) 표기법

DH 표기법은 1955년 Jacques Denavit과 Richard Hartenberg가 도입한 로봇 기구학의 표준 방법론입니다. 각 링크 간의 관계를 4개의 매개변수로 체계적으로 표현합니다.

### DH 매개변수
각 링크는 다음 4개 매개변수로 완전히 기술됩니다:

1. **θᵢ (관절각)**: zᵢ₋₁축 주위의 회전각
2. **dᵢ (링크 오프셋)**: zᵢ₋₁축을 따른 병진거리  
3. **aᵢ (링크 길이)**: xᵢ축을 따른 거리 (zᵢ₋₁와 zᵢ 사이)
4. **αᵢ (링크 비틀림)**: xᵢ축 주위의 회전각 (zᵢ₋₁와 zᵢ 사이)

### DH 좌표계 설정 규칙

**Step 1: Z축 설정**
- zᵢ축: 관절 i+1의 회전/병진 축에 위치
- 회전관절: 회전축 방향
- 직선관절: 병진축 방향

**Step 2: X축 설정**  
- xᵢ축: zᵢ₋₁과 zᵢ의 공통 법선(common normal) 방향
- 두 z축이 평행하거나 교차하는 경우 공통 법선이 정의되지 않음

**Step 3: Y축 설정**
- yᵢ축: 우수 법칙(right-hand rule)에 따라 결정
- 엄지(z축), 검지(x축), 중지(y축)

### DH 변환행렬
각 링크의 DH 매개변수로부터 변환행렬을 구성합니다:

```
Tᵢ₋₁ⁱ = Rot(z,θᵢ) · Trans(z,dᵢ) · Trans(x,aᵢ) · Rot(x,αᵢ)
```

일반적인 4×4 DH 변환행렬:
```
Tᵢ₋₁ⁱ = [cos θᵢ  -sin θᵢ cos αᵢ   sin θᵢ sin αᵢ   aᵢ cos θᵢ]
         [sin θᵢ   cos θᵢ cos αᵢ  -cos θᵢ sin αᵢ   aᵢ sin θᵢ]
         [   0        sin αᵢ         cos αᵢ           dᵢ    ]
         [   0           0              0              1     ]
```

## 🎯 순기구학 해법

### 변환행렬 연쇄법
로봇의 순기구학은 각 링크의 변환행렬을 순차적으로 곱하여 구합니다:

```
T₀ⁿ = T₀¹ · T₁² · T₂³ · ... · Tₙ₋₁ⁿ
```

### 해법 단계
1. **좌표계 설정**: DH 규칙에 따라 각 링크에 좌표계 부착
2. **DH 매개변수 추출**: 4개 매개변수 결정  
3. **DH 테이블 작성**: 모든 링크의 매개변수 정리
4. **변환행렬 계산**: 각 링크의 4×4 변환행렬 계산
5. **행렬 곱셈**: 베이스에서 말단까지 연쇄 곱셈

### 2링크 평면 매니퓰레이터 예시
간단한 RR(회전-회전) 매니퓰레이터의 경우:

**DH 테이블:**
| i | θᵢ | dᵢ | aᵢ | αᵢ |
|---|----|----|----|----|
| 1 | θ₁ | 0  | a₁ | 0  |
| 2 | θ₂ | 0  | a₂ | 0  |

**말단 위치:**
```
x = a₁cos(θ₁) + a₂cos(θ₁ + θ₂)
y = a₁sin(θ₁) + a₂sin(θ₁ + θ₂)
```

## 🎯 역기구학 해법

### 해석적 방법 (Analytical Method)
- **기하학적 접근**: 삼각법과 기하학을 이용한 직접 해법
- **대수적 접근**: DH 방정식을 대수적으로 풀이
- **적용 범위**: 단순한 구조의 로봇 (DOF ≤ 6)
- **장점**: 정확한 해, 빠른 계산
- **단점**: 복잡한 구조에서는 해법이 어려움

### 수치적 방법 (Numerical Method)  
- **뉴턴-랩슨법**: 반복적 수렴을 통한 근사해
- **야코비안 기반**: 선형화를 통한 반복 계산
- **적용 범위**: 모든 로봇 구조
- **장점**: 범용성, 높은 자유도 처리 가능
- **단점**: 수렴성 문제, 국소 최적해

### 기구학적 분리 (Kinematic Decoupling)
6자유도 로봇에서 구형 손목이 있는 경우 문제를 분리할 수 있습니다:

1. **위치 문제**: 처음 3개 관절로 손목 위치 결정
2. **자세 문제**: 나머지 3개 관절로 말단 자세 결정

## 🔧 실제 응용

### 산업용 로봇
- **6축 매니퓰레이터**: Universal Robots UR5e, KUKA KR 시리즈
- **SCARA 로봇**: 평면 작업용 4축 로봇
- **직교 로봇**: XYZ 축 조합의 직선 로봇

### 주요 응용 분야
- **모션 플래닝**: 로봇 경로 계획
- **충돌 감지**: 작업공간 내 장애물 회피  
- **궤적 생성**: 부드러운 운동 궤적 설계
- **위치 제어**: 정밀한 위치 제어 시스템

## 🎯 특이점과 작업공간

### 특이점 (Singularities)
자코비안 행렬의 계수가 떨어지는 로봇 자세:

- **경계 특이점**: 작업공간 경계에서 발생
- **내부 특이점**: 작업공간 내부에서 발생  
- **특이점에서의 문제**: 무한한 관절 속도, 제어 불능

### 작업공간 (Workspace)
- **도달 가능 작업공간**: 말단이 도달할 수 있는 모든 점
- **유효 작업공간**: 모든 자세가 가능한 영역
- **설계 고려사항**: 작업 요구사항과 로봇 구조의 최적화

## 🎯 학습 순서

1. **기본 개념** - 링크, 관절, 기구학적 체인
2. **좌표 변환** - 회전행렬, 동차변환행렬  
3. **DH 표기법** - 좌표계 설정과 매개변수
4. **순기구학** - 변환행렬 연쇄법
5. **역기구학** - 해석적/수치적 방법
6. **특이점 분석** - 작업공간과 제약조건

## 🔗 연결 분야
- 상위: [[기구학]]
- 기초: [[선형대수]], [[회전표현]]
- 연계: [[속도기구학]], [[동역학]]
- 응용: [[경로계획]], [[로봇제어기법]]

---

## 📚 주요 참고문헌

1. Forward Kinematics | ROS Robotics Learning
2. How to Calculate a Robot's Forward Kinematics in 5 Easy Steps - Robotiq  
3. Forward Kinematics - Clemson University Open Textbook
4. Denavit–Hartenberg parameters - Wikipedia
5. Universal Robots - DH Parameters for calculations  
6. Robot Kinematics: Forward and Inverse Kinematics - Academia
7. Robotics Part 17 - Forward Kinematics using DH Convention