# 동역학모델

> 상위: [[동역학]]

로봇의 질량, 관성, 운동과 그에 작용하는 힘과 토크 사이의 관계를 수학적으로 모델링하는 분야입니다. 기구학과 달리 로봇의 물리적 특성을 고려하여 실제 제어와 시뮬레이션에 필수적인 모델을 제공합니다.

## 📚 동역학의 기본 개념

### 동역학 vs 기구학
- **기구학**: 힘을 고려하지 않는 순수 기하학적 운동 관계
- **동역학**: 질량, 관성, 힘, 토크를 포함한 물리적 운동 법칙
- **적용 분야**: 제어 설계, 시뮬레이션, 궤적 계획, 성능 분석

### 동역학 문제의 분류

**순동역학 (Forward Dynamics)**
- **입력**: 현재 관절 위치 θ, 관절 속도 θ̇, 관절 토크 τ
- **출력**: 관절 가속도 θ̈
- **용도**: 로봇 시뮬레이션, 운동 예측

**역동역학 (Inverse Dynamics)**  
- **입력**: 관절 위치 θ, 관절 속도 θ̇, 원하는 관절 가속도 θ̈
- **출력**: 필요한 관절 토크 τ
- **용도**: 로봇 제어, 토크 계산

## 🔧 동역학 방정식의 표준 형태

로봇 매니퓰레이터의 동역학 방정식은 다음과 같은 표준 형태로 표현됩니다:

```
M(q)q̈ + C(q,q̇)q̇ + g(q) = τ
```

### 동역학 방정식의 구성 요소

**M(q): 관성행렬 (Inertia Matrix)**
- **정의**: 로봇의 질량과 관성 특성을 나타내는 n×n 대칭 정정치 행렬
- **물리적 의미**: 관절 가속도가 관절 토크에 미치는 영향
- **특성**: 
  - 항상 대칭 행렬
  - 양정치(positive definite) 행렬
  - 관절 자세 q에만 의존

**C(q,q̇): 코리올리/원심력 행렬 (Coriolis/Centrifugal Matrix)**
- **정의**: 관절 속도의 제곱과 두 관절 속도의 곱에 비례하는 항들
- **물리적 의미**: 로봇 운동 중 발생하는 비관성 효과
- **구성**:
  - 코리올리 힘: 두 관절의 상호 운동 효과
  - 원심력: 각 관절의 자체 회전 효과
- **특성**: 관절 좌표가 관성 좌표계가 아니기 때문에 발생

**g(q): 중력벡터 (Gravity Vector)**
- **정의**: 중력이 각 관절에 미치는 토크
- **특성**: 관절 위치 q에만 의존 (속도와 무관)
- **중요성**: 동역학 방정식에서 항상 존재하는 지배적 항

**τ: 관절 토크벡터 (Joint Torque Vector)**
- **회전관절**: 관절 토크 [N⋅m]
- **직선관절**: 관절 힘 [N]
- **외부 힘**: 말단에 작용하는 외력은 J^T F_tip으로 관절 토크로 변환

## 🎯 동역학 유도 방법론

### 라그랑지안 방법 (Lagrangian Method)

라그랑지안 방법은 에너지 기반 접근법으로 시스템의 운동에너지와 위치에너지를 이용합니다.

**라그랑지안 정의**
```
L = T - U
```
- T: 시스템의 총 운동에너지
- U: 시스템의 총 위치에너지

**오일러-라그랑지 방정식**
```
τᵢ = d/dt(∂L/∂q̇ᵢ) - ∂L/∂qᵢ
```

**장점**:
- 개념적으로 명확하고 체계적
- 복잡한 자유물체도 작성이 불필요
- 에너지 보존 법칙과 직접 연결

**단점**:
- 복잡한 시스템에서 계산이 번거로움
- 수치적 효율성이 떨어짐

### 뉴턴-오일러 방법 (Newton-Euler Method)

뉴턴-오일러 방법은 각 링크에 뉴턴의 운동 법칙 F=ma를 적용하는 방법입니다.

**뉴턴의 법칙 적용**
- **병진운동**: F = ma (선운동량 보존)
- **회전운동**: τ = Iα (각운동량 보존)

**재귀적 알고리즘**
1. **전방향 재귀**: 베이스에서 말단으로 속도와 가속도 전파
2. **후방향 재귀**: 말단에서 베이스로 힘과 토크 전파

**장점**:
- 계산적으로 효율적 O(n)
- 수치적 구현이 용이
- 실시간 제어에 적합

**단점**:
- 물리적 직관이 라그랑지안보다 부족
- 복잡한 구속조건 처리가 어려움

## 🔧 동역학 매개변수

### 관성 매개변수 (Inertial Parameters)

각 링크 i에 대해 다음 매개변수들이 정의됩니다:

**질량 특성**
- **mᵢ**: 링크 i의 질량 [kg]
- **rcᵢ**: 링크 좌표계에서 질량중심까지의 위치벡터
- **Icᵢ**: 질량중심에서의 관성텐서 [kg⋅m²]

**모터 특성** (기어가 있는 경우)
- **Im**: 모터의 회전 관성
- **kg**: 기어비
- **효과**: 모터 관성이 kg²배 증폭되어 링크 관성에 반영

### 동역학 매개변수 식별

실제 로봇에서는 정확한 동역학 매개변수를 얻기 위해 식별 과정이 필요합니다:

1. **이론적 계산**: CAD 모델 기반 매개변수 추정
2. **실험적 식별**: 실제 로봇 운동 데이터를 통한 매개변수 추정
3. **최소화 매개변수**: 동역학적으로 중요한 매개변수만 선별

## 🎯 동역학 방정식의 특성

### 중요한 수학적 성질

**관성행렬의 성질**
- M(q)는 대칭행렬: M(q) = M^T(q)
- M(q)는 양정치: x^T M(q) x > 0 for x ≠ 0
- M(q)는 관절 설정 q에만 의존

**왜도 대칭성 (Skew-Symmetry)**
- Ṁ(q) - 2C(q,q̇)는 왜도 대칭행렬
- 이 성질은 수동성 기반 제어에서 중요

**선형성 in 매개변수**
- 동역학 방정식은 관성 매개변수에 대해 선형
- 이는 적응제어와 매개변수 식별에 활용

### 특별한 경우들

**정적 평형 (Static Equilibrium)**
```
g(q) = τ_static
```
- 속도와 가속도가 0일 때 중력만 고려

**자유 공간 운동 (Free Space Motion)**
```
M(q)q̈ + C(q,q̇)q̇ = τ
```
- 중력이 없거나 수평면에서의 운동

## 🔧 계산 및 구현

### 효율적인 계산 방법

**재귀적 뉴턴-오일러 알고리즘**
- 시간 복잡도: O(n)
- 실시간 제어에 적합
- 대부분의 로봇 제어기에서 사용

**합성 강체 알고리즘 (Composite Rigid Body Algorithm)**
- 관성행렬 M(q)의 효율적 계산
- 시간 복잡도: O(n³)

**반복 개선법**
- 더 높은 정확도를 위한 수치적 방법
- 복잡한 기어 시스템 모델링

### 실제 구현 고려사항

**수치적 안정성**
- 특이점 근처에서의 수치적 문제
- 조건수가 나쁜 관성행렬 처리

**계산 최적화**
- 삼각함수의 중복 계산 최소화
- 대칭성을 이용한 계산량 감소

**실시간 제약**
- 제어 주기 내 계산 완료 보장
- 근사 방법의 활용

## 🎯 응용 분야

### 시뮬레이션
- **동역학 시뮬레이터**: Gazebo, MuJoCo, PyBullet
- **모델 검증**: 설계된 로봇의 성능 예측
- **안전성 검증**: 충돌이나 위험 상황 시뮬레이션

### 제어 시스템
- **계산 토크 제어**: 정확한 동역학 모델 기반 제어
- **모델 예측 제어**: 미래 상태 예측을 위한 모델
- **강건 제어**: 모델 불확실성을 고려한 제어

### 모션 플래닝
- **동역학 제약**: 관절 토크 한계를 고려한 경로 계획
- **에너지 최적화**: 최소 에너지 궤적 생성
- **시간 최적화**: 최단 시간 경로 계획

## 🎯 학습 순서

1. **기본 개념** - 순/역동역학 문제 이해
2. **라그랑지안 방법** - 에너지 기반 유도법
3. **뉴턴-오일러 방법** - 힘 기반 유도법
4. **표준 방정식** - M, C, g 행렬의 의미
5. **매개변수 식별** - 실제 시스템 모델링
6. **수치적 구현** - 효율적인 알고리즘

## 🔗 연결 분야
- 상위: [[동역학]]
- 기초: [[물리적기초]], [[선형대수]]
- 연계: [[제어시스템]], [[궤적계획]]
- 응용: [[로봇제어기법]], [[최적제어]]

---

## 📚 주요 참고문헌

1. Dynamics - Clemson University Open Textbook
2. Lagrangian Formulation of Dynamics - Modern Robotics  
3. Multi-Body Dynamics - MIT Underactuated Robotics
4. Robot Dynamics - ResearchGate Papers
5. Lagrangian Dynamics - UCSD Lecture Notes
6. Rigid-Body Dynamics - Robot Academy
7. Introduction to Robotics Lecture - University of Illinois