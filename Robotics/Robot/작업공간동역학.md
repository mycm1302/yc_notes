# 작업공간동역학

> 상위: [[동역학]]

말단장치 좌표계에서 표현된 동역학 방정식과 해석 방법입니다.

## 📐 기본 개념

### 정의
작업공간동역학(Task Space Dynamics)은 조인트 공간의 동역학 방정식을 말단장치의 위치와 자세로 표현된 작업공간으로 변환한 동역학 해석 방법입니다 [1].

### 수학적 기초
조인트 공간 동역학:
```
M(q)q̈ + C(q,q̇)q̇ + G(q) = τ
```

작업공간 변환:
```
x = f(q)  (순기구학)
ẋ = J(q)q̇  (속도 관계)
ẍ = J(q)q̈ + J̇(q)q̇  (가속도 관계)
```

## 🔄 변환 과정

### 1단계: 자코비안 관계 활용
조인트 가속도를 작업공간 가속도로 표현:
```
q̈ = J⁺(ẍ - J̇q̇) + (I - J⁺J)q̈ₙ
```

여기서:
- J⁺: 자코비안 의사역행렬
- q̈ₙ: 널 공간 가속도 (여유 자유도)

### 2단계: 작업공간 관성행렬 유도
```
Λ(q) = (JM⁻¹Jᵀ)⁻¹
```

여기서 Λ(q)는 작업공간 관성행렬입니다.

### 3단계: 작업공간 동역학 방정식
```
Λ(x)ẍ + μ(x,ẋ) + p(x) = F
```

여기서:
- Λ(x): 작업공간 관성행렬
- μ(x,ẋ): 작업공간 코리올리/원심력
- p(x): 작업공간 중력 벡터
- F: 말단장치에 작용하는 외력/모멘트

## 🎯 구성 요소

### 작업공간 관성행렬 Λ(x)
**물리적 의미:**
- 작업공간에서의 관성 특성
- 말단장치 가속도에 대한 저항
- 형상에 따라 변화하는 6×6 행렬

**계산 방법:**
```
Λ(q) = (J(q)M⁻¹(q)Jᵀ(q))⁻¹
```

**성질:**
- 대칭행렬: Λ = Λᵀ
- 양정부호: Λ > 0
- 특이점에서 특이해짐

### 작업공간 코리올리/원심력 μ(x,ẋ)
**정의:**
```
μ = Λ̇ẋ - ΛJM⁻¹(Cq̇ + G)
```

또는 다음과 같이 계산:
```
μ = ΛJM⁻¹h - ΛJ̇q̇
```

여기서 h = C(q,q̇)q̇ + G(q)

**물리적 의미:**
- 작업공간에서의 비관성력
- 운동에 의한 겉보기 힘
- 좌표계 변환 효과

### 작업공간 중력 벡터 p(x)
**정의:**
```
p = ΛJM⁻¹G(q)
```

**물리적 의미:**
- 작업공간에서 느끼는 중력 효과
- 자세에 따라 변화
- 평형 조건에 영향

## 📊 특수한 경우들

### 직교 로봇 (Cartesian Robot)
조인트와 작업공간이 일치하는 경우:
```
J = I  (단위행렬)
Λ = M⁻¹
μ = C
p = G
```

### 구면 손목 (Spherical Wrist)
위치와 자세가 분리되는 경우:
```
Λ = [Λₚ   0  ]  (블록 대각)
    [0   Λₒ  ]
```

여기서:
- Λₚ: 3×3 위치 관성행렬
- Λₒ: 3×3 자세 관성행렬

### 여유 자유도 시스템
n > 6인 경우 여유 자유도 처리:
```
q̈ = J⁺(ẍ - J̇q̇) + (I - J⁺J)q̈₀
```

여기서 q̈₀는 부차적 목표를 위한 가속도

## 🎯 응용 분야

### 1. 작업공간 제어
**임피던스 제어:**
```
F = Λ(ẍd - ẍ) + B(ẋd - ẋ) + K(xd - x)
```

**어드미턴스 제어:**
```
ẍ = Λ⁻¹(F - Bẋ - Kx)
```

### 2. 힘 제어
**직접 힘 제어:**
말단장치에 원하는 힘 Fd를 가하기 위한 토크:
```
τ = Jᵀ(Fd + μ + p) + (I - Jᵀ(JJᵀ)⁻¹J)τ₀
```

**하이브리드 힘/위치 제어:**
```
F = SᶠFd + Sᵖ[Λ(ẍd - ẍ) + B(ẋd - ẋ) + K(xd - x)]
```

여기서:
- Sᶠ: 힘 제어 선택 행렬
- Sᵖ: 위치 제어 선택 행렬

### 3. 궤적 추종
**피드포워드 + 피드백:**
```
F = Λẍd + μ + p + Kd(ẋd - ẋ) + Kp(xd - x)
```

### 4. 충돌 회피
**인공 포텐셜 힘:**
```
F = -∇U(x) + Λẍd + μ + p
```

여기서 U(x)는 충돌 회피 포텐셜

## 🔍 계산상 고려사항

### 수치적 안정성
**자코비안 특이점:**
- det(J) ≈ 0일 때 Λ가 발산
- 댐핑 최소제곱법 사용:
```
Λ = (JM⁻¹Jᵀ + λI)⁻¹
```

**조건수 개선:**
- 스케일링을 통한 조건수 개선
- SVD를 이용한 안정적 역산

### 계산 효율성
**직접 계산 vs 간접 계산:**
- 직접: Λ = (JM⁻¹Jᵀ)⁻¹ 계산
- 간접: M⁻¹ 먼저 계산 후 변환

**캐싱과 최적화:**
- 자코비안과 그 미분의 재사용
- 대칭성을 활용한 계산량 감소

## 🔗 다른 동역학과의 관계

### 조인트 공간과의 관계
```
τ = Jᵀ F + (I - Jᵀ(JJᵀ)⁻¹J)τ₀
```

이를 통해 작업공간 힘을 조인트 토크로 변환

### 에너지 관점
**운동에너지:**
```
T = (1/2)ẋᵀΛ(x)ẋ + (1/2)q̇ₙᵀMₙq̇ₙ
```

여기서 Mₙ은 널 공간 관성행렬

### 라그랑지안 형식
```
L = T - V = (1/2)ẋᵀΛ(x)ẋ - V(x)
```

## 📚 참고문헌

[1] Khatib, O. (1987). "A Unified Approach for Motion and Force Control of Robot Manipulators: The Operational Space Formulation". *IEEE Journal of Robotics and Automation*, 3(1), 43-53.
- 작업공간 동역학의 원조 논문

[2] Lynch, K.M., & Park, F.C. (2017). *Modern Robotics: Mechanics, Planning, and Control*. Cambridge University Press.
- Chapter 8.6: Dynamics in the Task Space, pp. 300-301

[3] Siciliano, B., et al. (2010). *Robotics: Modelling, Planning and Control*. Springer.
- Chapter 9: Operational Space Control, pp. 371-398

[4] Spong, M.W., Hutchinson, S., & Vidyasagar, M. (2020). *Robot Modeling and Control*. 2nd Edition, Wiley.
- Chapter 6: Dynamics, Section 6.7: Task Space Dynamics

[5] Sciavicco, L., & Siciliano, B. (2000). *Modelling and Control of Robot Manipulators*. 2nd Edition, Springer.
- Chapter 8: Dynamics, pp. 207-234

[6] Craig, J.J. (2017). *Introduction to Robotics: Mechanics and Control*. 4th Edition, Pearson.
- Chapter 10: Force Control of Manipulators, pp. 325-356

---

## 🔗 연결 분야
- **상위**: [[동역학]]
- **관련**: [[역동역학해석]], [[자코비안분석]]
- **응용**: [[로봇제어기법]], [[힘제어]], [[임피던스제어]]

## 태그
#작업공간동역학 #말단장치제어 #힘제어 #임피던스제어 #자코비안