# 구속동역학

> 상위: [[동역학]]

기하학적 구속조건이나 운동학적 구속조건을 받는 로봇 시스템의 동역학 해석 방법입니다.

## 📐 기본 개념

### 정의
구속동역학(Constrained Dynamics)은 시스템의 운동이 특정 구속조건에 의해 제한되는 경우의 동역학 해석을 다룹니다 [1].

### 구속조건의 분류

**홀로노믹 구속 (Holonomic Constraints):**
위치만의 함수로 표현되는 구속:
```
φ(q,t) = 0
```

**비홀로노믹 구속 (Nonholonomic Constraints):**
속도를 포함하는 구속:
```
A(q)q̇ + b(q,t) = 0
```

## 🔗 라그랑지 승수법

### 홀로노믹 구속 시스템
**구속조건:**
```
φ(q) = 0  (m개의 구속, n개의 자유도)
```

**라그랑지안:**
```
L = T(q,q̇) - V(q)
```

**구속 동역학 방정식:**
```
d/dt(∂L/∂q̇) - ∂L/∂q = Jᵀ(q)λ + τ
J(q)q̈ + J̇(q)q̇ = 0
```

여기서:
- J(q) = ∂φ/∂q: 구속 자코비안 (m×n)
- λ: 라그랑지 승수 벡터 (m×1)
- τ: 외부 토크 벡터

### 표준형 표현
```
[M(q)   Jᵀ(q)][q̈] = [τ - C(q,q̇)q̇ - G(q)]
[J(q)    0   ][λ]   [-J̇(q)q̇        ]
```

이는 DAE (Differential Algebraic Equation) 형태입니다.

### 구속력의 의미
라그랑지 승수 λ는 구속을 유지하기 위해 필요한 구속력을 나타냅니다:
```
f_constraint = Jᵀ(q)λ
```

## 🔄 투영법 (Projection Methods)

### 귀무공간 투영
구속 자코비안의 귀무공간 행렬 N(q):
```
J(q)N(q) = 0
rank(N) = n - m
```

**축소 동역학:**
```
q̇ = N(q)ν
```

여기서 ν는 독립 속도 변수

### 축소 방정식 유도
원래 방정식에 Nᵀ를 곱하면:
```
Nᵀ(q)M(q)N(q)ν̇ + Nᵀ(q)[M(q)Ṅ(q) + C(q,q̇)N(q)]ν + Nᵀ(q)G(q) = Nᵀ(q)τ
```

**축소 형태:**
```
M̃(q)ν̇ + C̃(q,ν)ν + G̃(q) = τ̃
```

여기서:
- M̃ = NᵀMN: 축소 관성행렬
- C̃ = Nᵀ(MṄ + CN): 축소 코리올리 항
- G̃ = NᵀG: 축소 중력 항
- τ̃ = Nᵀτ: 축소 토크

## 🚗 비홀로노믹 구속

### 일반형
```
A(q)q̇ = 0
```

여기서 A(q)는 k×n 행렬 (k < n)

### 예제: 바퀴 굴림 구속
**단일 바퀴:**
```
ẋsinθ - ẏcosθ = 0  (미끄러짐 없음)
```

**차동구동 로봇:**
```
A(q) = [-sinθ   cosθ   L]  q̇ = [ẋ]
       [-sinθ   cosθ  -L]       [ẏ]
                               [θ̇]
```

### 분포와 인볼루티비티
**분포 Δ:**
구속을 만족하는 속도들의 집합:
```
Δ = {v ∈ TqM : A(q)v = 0}
```

**프로베니우스 정리:**
분포 Δ가 인볼루티브하면 적분 가능 (홀로노믹)
인볼루티브하지 않으면 비적분 가능 (진정한 비홀로노믹)

### 차우 정리 (Chow's Theorem)
제어 가능성과 관련된 정리:
시스템이 완전히 제어 가능하려면 Lie 대수가 전체 접촉공간을 span해야 함

## 🔗 폐루프 기구의 동역학

### 4절 링크 기구
**구속조건:**
벡터 루프 방정식으로부터:
```
L₁cosθ₁ + L₂cosθ₂ + L₃cosθ₃ + L₄cosθ₄ = 0
L₁sinθ₁ + L₂sinθ₂ + L₃sinθ₃ + L₄sinθ₄ = 0
```

**구속 자코비안:**
```
J = [-L₁sinθ₁  -L₂sinθ₂  -L₃sinθ₃  -L₄sinθ₄]
    [ L₁cosθ₁   L₂cosθ₂   L₃cosθ₃   L₄cosθ₄]
```

### 병렬 로봇
**스튜어트 플랫폼:**
6개의 다리로 연결된 병렬 기구
- 각 다리의 길이 구속
- 6자유도 플랫폼 제어

**구속조건:**
```
|pᵢ - bᵢ|² = Lᵢ²,  i = 1,...,6
```

여기서:
- pᵢ: 플랫폼상의 연결점
- bᵢ: 베이스상의 연결점  
- Lᵢ: i번째 다리 길이

## 📊 수치적 해법

### DAE 적분
**지수-3 DAE:**
구속 동역학은 일반적으로 지수-3 DAE
- 위치 수준: φ(q) = 0
- 속도 수준: J(q)q̇ = 0  
- 가속도 수준: J(q)q̈ + J̇(q)q̇ = 0

### 안정화 기법
**바움가르테 안정화:**
```
J(q)q̈ + J̇(q)q̇ + 2α₁J(q)q̇ + α₂φ(q) = 0
```

여기서 α₁, α₂ > 0는 안정화 매개변수

### 좌표 분할법
독립 좌표와 종속 좌표로 분할:
```
q = [qᵢ]  (독립)
    [qᵈ]  (종속)
```

종속 좌표를 독립 좌표로 표현:
```
qᵈ = f(qᵢ)
```

## 🎯 제어 시스템 설계

### 구속 하의 제어
**목표:** 구속을 유지하면서 원하는 운동 실현

**제어 법칙:**
```
τ = M(q)[q̈ᵈ + Kd(q̇ᵈ - q̇) + Kp(qᵈ - q)] + C(q,q̇)q̇ + G(q)
```

단, qᵈ는 구속을 만족해야 함

### 힘/토크 분해
전체 토크를 두 부분으로 분해:
```
τ = τ_motion + τ_constraint
```

여기서:
- τ_motion: 운동 생성 토크
- τ_constraint: 구속 유지 토크

### 비홀로노믹 제어
**키네마틱 제어:**
```
v = u₁
ω = u₂
```

**백스테핑 제어:**
키네마틱 제어기와 동역학 제어기의 계층적 설계

## 🔍 특수 고려사항

### 특이점 처리
구속 자코비안이 특이한 경우:
- rank(J) < m인 구성
- 구속이 국부적으로 사라짐
- 정규화 기법 필요

### 충격과 접촉
**충격 방정식:**
```
M(q⁺)(q̇⁺ - q̇⁻) = JᵀΛ
```

여기서:
- q̇⁻, q̇⁺: 충격 전후 속도
- Λ: 충격량

### 마찰을 포함한 접촉
**쿨롱 마찰:**
```
|fₜ| ≤ μ|fₙ|
```

**상보성 조건:**
```
0 ≤ fₙ ⊥ gap ≥ 0
```

## 📚 참고문헌

[1] Lynch, K.M., & Park, F.C. (2017). *Modern Robotics: Mechanics, Planning, and Control*. Cambridge University Press.
- Chapter 8.7: Constrained Dynamics, pp. 301-303

[2] Spong, M.W., Hutchinson, S., & Vidyasagar, M. (2020). *Robot Modeling and Control*. 2nd Edition, Wiley.
- Chapter 6: Dynamics, Section 6.9: Constrained Dynamics

[3] Shabana, A.A. (2013). *Dynamics of Multibody Systems*. 4th Edition, Cambridge University Press.
- Chapter 9: Constrained Dynamics, pp. 287-334

[4] Blajer, W. (2001). "Elimination of Constraint Violation and Accuracy Aspects in Numerical Simulation of Multibody Systems". *Multibody System Dynamics*, 7(3), 265-284.
- 구속 위반 제거와 수치적 정확도

[5] Pars, L.A. (1965). *A Treatise on Analytical Dynamics*. Wiley.
- 고전 해석역학의 구속 시스템 이론

[6] Murray, R.M., Li, Z., & Sastry, S.S. (1994). *A Mathematical Introduction to Robotic Manipulation*. CRC Press.
- Chapter 7: Nonholonomic Motion Planning, pp. 335-386

[7] Bloch, A.M. (2003). *Nonholonomic Mechanics and Control*. Springer.
- 비홀로노믹 시스템의 기하학적 제어 이론

---

## 🔗 연결 분야
- **상위**: [[동역학]]
- **관련**: [[동역학방정식성질]], [[폐루프동역학]]
- **응용**: [[병렬로봇시스템]], [[이동로봇시스템]]

## 태그
#구속동역학 #라그랑지승수 #비홀로노믹 #병렬로봇 #DAE