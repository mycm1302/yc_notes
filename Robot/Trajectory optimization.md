# 궤적 최적화 (Trajectory Optimization)

## 개념 정의

궤적 최적화는 제약조건을 만족하면서 성능 지표를 최소화(또는 최대화)하는 궤적을 설계하는 과정입니다. 일반적으로 최적 제어 문제에 대한 열린 루프(open-loop) 해를 계산하는 기법으로, 로봇공학에서 매우 중요한 기술입니다.

## 역사적 배경

### 수학적 기원
- **1697년**: 최속강하곡선(Brachistochrone) 문제로 시작
- **변분법**: 단일 수치가 아닌 곡선 전체를 최적화하는 수학적 방법론
- **1950년대**: 디지털 컴퓨터 도입으로 실제 문제 해결 가능

### 제어 이론 발전
- **폰트랴긴 최대 원리**: 간접법(Indirect Methods)의 기초
- **브라이슨과 블리스**: 미국의 최적 제어 이론 개발
- **폰트랴긴**: 러시아의 최적 제어 연구

## 주요 방법론

### 1. 직접법 (Direct Methods)

#### Direct Shooting
- **개념**: 제어 입력을 매개변수화하여 최적화
- **장점**: 비교적 단순한 구현
- **단점**: 초기 추정값에 민감, 수렴 어려움

#### Direct Transcription (Collocation)
- **개념**: 상태와 제어를 모두 이산화하여 NLP 문제로 변환
- **장점**: 안정적 수렴, 제약조건 처리 용이
- **단점**: 대규모 변수, 계산 복잡도 증가

### 2. 간접법 (Indirect Methods)
- **변분법**: 오일러-라그랑주 방정식 활용
- **해밀턴-야코비-벨만**: 동적 계획법 기반
- **장점**: 이론적으로 정확한 해
- **단점**: 경계값 문제, 구현 복잡도

### 3. 반복적 방법

#### iLQR (iterative Linear Quadratic Regulator)
- **개념**: 궤적 주변에서 선형화하여 반복 해결
- **장점**: 빠른 수렴, 실시간 적용 가능
- **단점**: 제약조건 없는 문제만 처리

#### DDP (Differential Dynamic Programming)
- **개념**: iLQR의 확장, 동역학의 2차 근사 사용
- **특징**: HJB 방정식의 국소 2차 근사
- **한계**: 추가 미분 계산 비용 대비 성능 향상 미미

## 최신 기법

### GPU 병렬화
- **RETRO 프레임워크**: 공간-시간 적응 최적화
- **계산 복잡도**: O(T^2.4) + O(Tn^2)로 개선
- **실시간 제어**: 동적 환경에서 즉각적 대응

### 기계학습 융합
- **강화학습**: 시행착오를 통한 궤적 학습
- **신경망**: 복잡한 동역학 모델링
- **근사 추론**: 확률적 궤적 최적화

### 증강 라그랑지안
- **제약조건 처리**: 패널티 방법의 자동 가중치 조정
- **수치적 안정성**: 조건수 문제 해결
- **정확한 제약 만족**: 유한 패널티로 정확한 해 달성

## 로봇공학 응용

### 매니퓰레이터
- **역기구학**: 다중해 중 최적 관절 구성 선택
- **충돌 회피**: 작업공간 내 장애물 회피 궤적
- **작업 최적화**: 용접, 조립 등 특정 작업에 최적화된 동작

### 이동 로봇
- **경로 계획**: 출발점에서 목표점까지 최적 경로
- **동역학 고려**: 관성, 미끄러짐 등 물리적 제약
- **에너지 효율**: 배터리 소모 최소화 궤적

### 휴머노이드
- **보행 생성**: 안정적이고 자연스러운 걸음새
- **전신 동작**: 복잡한 동작의 조정 및 최적화
- **균형 제어**: 동적 안정성 유지

### 쿼드로터
- **고속 기동**: 민첩한 비행 궤적 생성
- **장애물 회피**: 3차원 공간에서의 경로 계획
- **에너지 최적화**: 비행 시간 최대화

## 수학적 기법

### B-스플라인 궤적
- **미분 특성**: 스플라인의 미분도 스플라인
- **기하학적 해석**: 제어점의 볼록포(Convex Hull) 내 궤적
- **제약 조건**: 위치, 속도, 가속도 제한 용이

### 미분 평탄성 (Differential Flatness)
- **개념**: 시스템 상태를 평탄 출력으로 표현
- **장점**: 궤적 계획 단순화
- **응용**: 쿼드로터, 자동차 등

### 그래프 기반 방법
- **GCS**: 그래프의 최단 경로 문제로 변환
- **혼합 정수 계획**: 이산적 선택과 연속 최적화 결합
- **확장성**: 복잡한 환경에서도 적용 가능

## 성능 지표

### 시간 최적화
- **최소 시간**: 가장 빠른 작업 완료
- **응용**: 산업 로봇의 생산성 향상

### 에너지 최적화
- **최소 에너지**: 액추에이터 토크 제곱합 최소화
- **응용**: 모바일 로봇의 배터리 수명 연장

### 부드러움 최적화
- **최소 저크**: 가속도 변화율 최소화
- **응용**: 정밀 작업, 승차감 개선

### 다목적 최적화
- **가중 합**: 여러 목표를 가중치로 결합
- **파레토 최적**: 상충하는 목표 간 균형점 탐색

## 도전과제 및 해결책

### 초기값 의존성
- **문제**: 국소 최적해에 수렴 위험
- **해결**: 다중 초기값, 글로벌 최적화 기법

### 계산 복잡도
- **문제**: 실시간 적용 한계
- **해결**: 병렬 처리, 근사 알고리즘

### 제약조건 처리
- **문제**: 복잡한 제약조건 증가 시 확장성 제한
- **해결**: 특수 구조 활용, 분해 기법

### 불확실성 처리
- **문제**: 실제 환경의 예측 불가능성
- **해결**: 강건 최적화, 확률적 방법

## 연결 분야

- **상위**: [[궤적계획]], [[모션플래닝]]
- **관련**: [[최적제어]], [[경로계획]]
- **응용**: [[로봇제어기법]], [[이동로봇시스템]], [[휴머노이드시스템]]
- **기초**: [[동역학]], [[제어시스템]]

## 태그

#궤적최적화 #최적제어 #모션플래닝 #경로계획 #실시간제어 #강화학습

---

**주요 참조**: MIT Underactuated Robotics, IEEE Robotics Papers